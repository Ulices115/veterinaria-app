"use strict";(self.webpackChunkfenix_app=self.webpackChunkfenix_app||[]).push([[413],{6413:(Qo,M,s)=>{s.r(M),s.d(M,{PedidosModule:()=>Eo});var m=s(8583),F=s(206),p=s(3679),$=s(4655),Z=s(8390),d=s(2789),f=s(7238),H=s(8259),r=s.n(H),t=s(7716),T=s(2340),R=s(1841);let A=(()=>{class e{constructor(i){this.httpClient=i,this.urlPD=`${T.N.baseUrl}/api/pedidodetalle/`,this.urlS=`${T.N.baseUrl}/api/inventarioservicios/`,this.urlcfdi=`${T.N.baseUrl}/api/cfdi/`,this.urlb_p=`${T.N.baseUrl}/api/b_p/`,this.urlP=`${T.N.baseUrl}/api/pedido/`,this.urlI=`${T.N.baseUrl}/api/inventario_general/`,this.urlU=`${T.N.baseUrl}/api/ubicacion/`,this.urlfactura=`${T.N.baseUrl}/api/factura/`,this.urldev=`${T.N.baseUrl}/api/devoluciones/`,this.urlcorreo=`${T.N.baseUrl}/api/correo/`}getpedidod(i){return this.httpClient.get(this.urlPD+i)}getpedidosd(){return this.httpClient.get(this.urlPD)}guardardetalle(i,n,a){return this.httpClient.post(this.urlPD+`?id=${n}&ubi=${a}`,i)}eliminarpedidoD(i,n,a){return this.httpClient.delete(this.urlPD+i+`?ubi=${n}&pedido=${a}`)}actualizarpedidoD(i){return this.httpClient.put(this.urlPD+i.id,i)}getservicio(i,n){return this.httpClient.get(this.urlS+n+`?ubi=${i}`)}eliminarservicio(i){return this.httpClient.delete(this.urlS+i)}getxml(i){return this.httpClient.get(this.urlcfdi+i,{responseType:"text"})}getb_ps(){return this.httpClient.get(this.urlb_p)}getb_p(i){return this.httpClient.get(this.urlb_p+i)}guardarpedido(i){return this.httpClient.post(this.urlP,i)}getpedidos(){return this.httpClient.get(this.urlP)}getpedido(i,n,a,c,l,u){return this.httpClient.get(this.urlP+i+`?tipo=${n}&ubicacion=${a}&f_ini=${c}&f_fin=${l}&seleccion2=${u}`)}eliminarpedido(i){return this.httpClient.delete(this.urlP+i)}updatepedido(i){return this.httpClient.put(this.urlP+i.id_pedido,i)}getinventario(i,n,a){return this.httpClient.get(this.urlI+n+`?ubi=${i}&tipo=${a}`)}actualizarinventario(i){return this.httpClient.put(this.urlI+i._id,i)}getubicaciones(){return this.httpClient.get(this.urlU)}getubicacion(i){return this.httpClient.get(this.urlU+i)}guardardevolucion(i,n){return this.httpClient.post(this.urldev+`?ubi=${i}`,n)}getdevolucion(i){return this.httpClient.get(this.urldev+i)}getdevoluciones(){return this.httpClient.get(this.urldev)}guardarfactura(i){return this.httpClient.post(this.urlfactura,i)}getfacturas(){return this.httpClient.get(this.urlfactura)}getfactura(i){return this.httpClient.get(this.urlfactura+i)}enviarcorreo(i){return this.httpClient.post(this.urlcorreo,i)}}return e.\u0275fac=function(i){return new(i||e)(t.LFG(R.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var x=s(6518),E=s(8382),S=s(9761),P=s(4395),O=s(8002),g=s(3738),w=s(5618),_=s(8295),D=s(9983),N=s(5781),q=s(1095),U=s(6627),k=s(2458);function z(e,o){if(1&e&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}let j=(()=>{class e{constructor(i,n){this.httpservi=i,this.authService=n,this.filter="",this.myControl=new p.NI(""),this.options=[],this.pedido="",this.pedidos=[],this.filterValue="",this.bandera=0,this.messageEvent=new t.vpe,this.messageEvent2=new t.vpe}ngOnInit(){this.filteredOptions=this.myControl.valueChanges.pipe((0,S.O)(""),(0,P.b)(100),(0,O.U)(i=>this._filter(i||"")))}_filter(i){return this.filterValue=i.toLowerCase(),this.filterValue?(this.getpedidosD(),this.options.filter(n=>n.toLowerCase().includes(this.filterValue))):this.options.filter(n=>n.toLowerCase().includes(this.filterValue))}getpedidosD(){this.httpservi.getpedido(this.filterValue,"filtro",this.authService.usuario.ubicacion).subscribe(n=>{this.options=[];for(const a in n)this.options.push(n[a].id_pedido)})}pedidoseleccionado(){this.options=[],this.pedido=this.myControl.value,console.log(this.pedido),this.messageEvent.emit(this.pedido),this.pedido="",this.myControl.patchValue("")}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(A),t.Y36(x.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-buscadorpedido"]],outputs:{messageEvent:"messageEvent",messageEvent2:"messageEvent2"},decls:19,vars:5,consts:[[1,"custom"],[1,"row"],["fxLayoutAlign","space-between",1,"col-sm-auto"],["appearance","fill",1,"example-full-width"],["type","text","placeholder","","aria-label","Nombre","matInput","",3,"formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm"],[1,"example-button-row",2,"margin-right","1px"],["mat-raised-button","","color","accent",2,"margin-top","15px",3,"click"],[3,"value"]],template:function(i,n){if(1&i&&(t.TgZ(0,"mat-card",0),t.TgZ(1,"mat-card-content"),t.TgZ(2,"div",1),t.TgZ(3,"div",2),t.TgZ(4,"mat-form-field",3),t.TgZ(5,"mat-label"),t._uU(6,"N\xfamero del pedido"),t.qZA(),t._UZ(7,"input",4),t.TgZ(8,"mat-autocomplete",null,5),t.YNc(10,z,2,2,"mat-option",6),t.ALo(11,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t.TgZ(14,"button",9),t.NdJ("click",function(){return n.pedidoseleccionado()}),t._uU(15,"Buscar"),t.TgZ(16,"mat-icon"),t._uU(17,"search"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(18,"br")),2&i){const a=t.MAs(9);t.xp6(7),t.Q6J("formControl",n.myControl)("matAutocomplete",a),t.xp6(3),t.Q6J("ngForOf",t.lcZ(11,3,n.filteredOptions))}},directives:[g.a8,g.dn,w.Wh,_.KE,_.hX,D.Nt,p.Fj,N.ZL,p.JJ,p.oH,N.XC,m.sg,q.lW,U.Hw,k.ey],pipes:[m.Ov],styles:["input[_ngcontent-%COMP%]{text-transform:uppercase}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.example-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();var y=s(9692),V=s(7519),Y=s(2613);function W(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"mat-option",23),t.NdJ("click",function(){return t.CHM(i),t.oxw().inventarioseleccionado()}),t._uU(1),t.qZA()}if(2&e){const i=o.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}function G(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"mat-radio-button",24),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw().descuento(c)}),t._uU(1),t.qZA()}if(2&e){const i=o.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}let I=(()=>{class e{constructor(i,n){this.httpservi=i,this.authService=n,this.filter="",this.myControl=new p.NI(""),this.options=[],this.prod="",this.filterValue="",this.banderaP=1,this.estado=!0,this.guardado=!1,this.PEDIDOD={id_pedido:"",referencia:"",descripcion:"",cantidad:1,precio:0,subtotal:0,descuento:0,importe:0},this.cantidad_des=0,this.descuento_por=0,this.descuento_impor=0,this.estado_por=!1,this.estado_importe=!0,this.ubicaciones=[],this.ubicacion="",this.existencias=0,this.tipo="",this.cantidad=new p.NI(""),this.valor=1,this.seleccionado="Porcentaje",this.opciones=["Porcentaje","Importe"],this.messageEvent=new t.vpe}ngOnInit(){this.ubicacionusuario(this.authService.usuario.ubicacion),this.filteredOptions=this.myControl.valueChanges.pipe((0,S.O)(""),(0,P.b)(200),(0,O.U)(i=>this._filter(i||""))),this.cantidad.valueChanges.pipe((0,P.b)(900),(0,V.x)()).subscribe(i=>{this.PEDIDOD.cantidad=i,this.Subtotal()})}_filter(i){return this.filterValue=i.toLowerCase(),this.filterValue?(this.obtenerinventario(),this.options.filter(n=>n.toLowerCase().includes(this.filterValue))):this.options.filter(n=>n.toLowerCase().includes(this.filterValue))}obtenerinventario(){this.httpservi.getinventario(this.ubicacion,this.filterValue,"").subscribe(i=>{this.options=[];for(const n in i)this.options.push(i[n].productos_servicios.descripcion),this.options.push(i[n].productos_servicios.codigo_barra),console.log("encontrado")})}agregarpedidod(){if(""!==this.prod){this.PEDIDOD.descuento=0==this.estado_por?this.cantidad_des*(this.PEDIDOD.precio*(this.descuento_por/100)):this.descuento_impor,console.log(this.PEDIDOD.descuento);const i={descripcion:this.PEDIDOD.descripcion,cantidad:this.PEDIDOD.cantidad,precio:this.PEDIDOD.precio,referencia:this.PEDIDOD.referencia,subtotal:this.PEDIDOD.subtotal,descuento:this.PEDIDOD.descuento,importe:this.PEDIDOD.subtotal-this.PEDIDOD.descuento};"Producto"==this.tipo?this.existencias>0&&this.existencias>=this.PEDIDOD.cantidad?(this.PEDIDOD.cantidad=1,this.PEDIDOD.subtotal=0,this.PEDIDOD.precio=0,this.prod="",this.myControl.patchValue(""),this.messageEvent.emit(i),this.estado=!1,this.existencias=0,this.descuento_por=0,this.cantidad_des=0,this.descuento_impor=0,this.PEDIDOD.descuento=0):r().fire({title:"Oops!",text:"Existencias del producto insuficientes",icon:"warning",confirmButtonText:"ok"}):(this.PEDIDOD.cantidad=1,this.PEDIDOD.subtotal=0,this.PEDIDOD.precio=0,this.prod="",this.myControl.patchValue(""),this.messageEvent.emit(i),this.estado=!1,this.existencias=0,this.descuento_por=0,this.cantidad_des=0,this.descuento_impor=0,this.PEDIDOD.descuento=0)}}inventarioseleccionado(){this.prod=this.myControl.value,console.log(this.prod),this.httpservi.getinventario(this.ubicacion,this.myControl.value,"").subscribe(n=>{console.log(n);for(const a in n)this.PEDIDOD.descripcion=n[a].productos_servicios.descripcion,this.PEDIDOD.precio=n[a].precio,this.PEDIDOD.subtotal=this.PEDIDOD.precio,this.PEDIDOD.referencia=n[a].id_inventario,this.PEDIDOD.cantidad=1,this.tipo=n[a].tipo,this.existencias=null==n[a].cantidad?1:n[a].cantidad}),this.estado=!1}Subtotal(){this.PEDIDOD.subtotal=this.PEDIDOD.precio*this.PEDIDOD.cantidad}ubicacionusuario(i){this.httpservi.getubicacion(i).subscribe(a=>{for(const c in a)this.ubicacion=a[c].id_ubicacion}),this.obtenerinventario(),this.estado=!1}descuento(i){console.log(i),"Importe"==i?(this.estado_importe=!1,this.estado_por=!0):(this.estado_importe=!0,this.estado_por=!1)}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(A),t.Y36(x.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-producto"]],outputs:{messageEvent:"messageEvent"},decls:81,vars:23,consts:[[1,"custom"],[1,"row"],["fxLayoutAlign","space-between",1,"col-sm-auto"],["appearance","fill",1,"example-full-width",2,"width","250px"],["type","text","placeholder","","aria-label","Nombre","matInput","",3,"formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],["appearance","fill",2,"width","130px"],["matInput","","placeholder","","type","number","readonly","","name","existencias","value","",3,"ngModel","ngModelChange"],[1,"col-sm-auto"],["matInput","","placeholder","","readonly","",3,"value"],["matInput","","placeholder","","type","number","min","1","max","100","name","cantidad","value","",3,"ngModel","formControl","ngModelChange","change"],[1,"col-sm-4"],["aria-labelledby","example-radio-group-label",3,"ngModel","ngModelChange"],["class","example-radio-button",3,"value","click",4,"ngFor","ngForOf"],["appearance","fill",2,"width","150px"],["matInput","","placeholder","",3,"ngModel","disabled","ngModelChange"],["matSuffix",""],["matPrefix",""],["matInput","","placeholder","","type","number",3,"ngModel","disabled","ngModelChange"],[1,"col-sm"],[1,"example-button-row"],["mat-raised-button","","color","accent",2,"margin-top","15px",3,"disabled","click"],[3,"value","click"],[1,"example-radio-button",3,"value","click"]],template:function(i,n){if(1&i&&(t.TgZ(0,"mat-card",0),t.TgZ(1,"h3"),t._uU(2,"Productos/Servicio"),t.qZA(),t.TgZ(3,"mat-card-content"),t.TgZ(4,"div",1),t.TgZ(5,"div",2),t.TgZ(6,"mat-form-field",3),t.TgZ(7,"mat-label"),t._uU(8,"Nombre o descripci\xf3n"),t.qZA(),t._UZ(9,"input",4),t.TgZ(10,"mat-autocomplete",null,5),t.YNc(12,W,2,2,"mat-option",6),t.ALo(13,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"div",2),t.TgZ(15,"mat-form-field",7),t.TgZ(16,"mat-label"),t._uU(17,"Existencias "),t.TgZ(18,"mat-icon"),t._uU(19,"locked"),t.qZA(),t.qZA(),t.TgZ(20,"input",8),t.NdJ("ngModelChange",function(c){return n.existencias=c}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(21,"div",9),t.TgZ(22,"mat-form-field",7),t.TgZ(23,"mat-label"),t._uU(24,"Precio por Unidad "),t.TgZ(25,"mat-icon"),t._uU(26,"locked"),t.qZA(),t.qZA(),t._UZ(27,"input",10),t.ALo(28,"currency"),t.qZA(),t.qZA(),t.TgZ(29,"div",9),t.TgZ(30,"mat-form-field",7),t.TgZ(31,"mat-label"),t._uU(32,"Seleccionar cantidad"),t.qZA(),t.TgZ(33,"input",11),t.NdJ("ngModelChange",function(c){return n.PEDIDOD.cantidad=c})("change",function(){return n.Subtotal()}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(34,"div",9),t.TgZ(35,"mat-form-field",7),t.TgZ(36,"mat-label"),t._uU(37,"Subtotal "),t.TgZ(38,"mat-icon"),t._uU(39,"locked"),t.qZA(),t.qZA(),t._UZ(40,"input",10),t.ALo(41,"currency"),t.qZA(),t.qZA(),t.TgZ(42,"div",12),t.TgZ(43,"h4"),t._uU(44,"Descuento"),t.qZA(),t.TgZ(45,"mat-radio-group",13),t.NdJ("ngModelChange",function(c){return n.seleccionado=c}),t.YNc(46,G,2,2,"mat-radio-button",14),t.qZA(),t.qZA(),t._UZ(47,"p"),t.TgZ(48,"div",1),t.TgZ(49,"div",9),t.TgZ(50,"mat-form-field",15),t.TgZ(51,"mat-label"),t._uU(52,"Cantidad de descuentos "),t.TgZ(53,"mat-icon"),t._uU(54,"create"),t.qZA(),t.qZA(),t.TgZ(55,"input",16),t.NdJ("ngModelChange",function(c){return n.cantidad_des=c}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(56,"div",9),t.TgZ(57,"mat-form-field",15),t.TgZ(58,"span",17),t._uU(59,"% \xa0"),t.qZA(),t.TgZ(60,"mat-label"),t._uU(61,"Porcentaje de descuento"),t.TgZ(62,"mat-icon"),t._uU(63,"create"),t.qZA(),t.qZA(),t.TgZ(64,"input",16),t.NdJ("ngModelChange",function(c){return n.descuento_por=c}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(65,"div",9),t.TgZ(66,"mat-form-field",15),t.TgZ(67,"span",18),t._uU(68,"$ \xa0"),t.qZA(),t.TgZ(69,"mat-label"),t._uU(70,"Importe"),t.TgZ(71,"mat-icon"),t._uU(72,"create"),t.qZA(),t.qZA(),t.TgZ(73,"input",19),t.NdJ("ngModelChange",function(c){return n.descuento_impor=c}),t.qZA(),t.qZA(),t.qZA(),t.TgZ(74,"div",20),t.TgZ(75,"div",21),t.TgZ(76,"button",22),t.NdJ("click",function(){return n.agregarpedidod()}),t._uU(77,"Agregar "),t.TgZ(78,"mat-icon"),t._uU(79,"add"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(80,"br")),2&i){const a=t.MAs(11);t.xp6(9),t.Q6J("formControl",n.myControl)("matAutocomplete",a),t.xp6(3),t.Q6J("ngForOf",t.lcZ(13,17,n.filteredOptions)),t.xp6(8),t.Q6J("ngModel",n.existencias),t.xp6(7),t.Q6J("value",t.lcZ(28,19,n.PEDIDOD.precio)),t.xp6(6),t.Q6J("ngModel",n.PEDIDOD.cantidad)("formControl",n.cantidad),t.xp6(7),t.Q6J("value",t.lcZ(41,21,n.PEDIDOD.subtotal)),t.xp6(5),t.Q6J("ngModel",n.seleccionado),t.xp6(1),t.Q6J("ngForOf",n.opciones),t.xp6(9),t.Q6J("ngModel",n.cantidad_des)("disabled",n.estado_por),t.xp6(9),t.Q6J("ngModel",n.descuento_por)("disabled",n.estado_por),t.xp6(9),t.Q6J("ngModel",n.descuento_impor)("disabled",n.estado_importe),t.xp6(3),t.Q6J("disabled",n.estado)}},directives:[g.a8,g.dn,w.Wh,_.KE,_.hX,D.Nt,p.Fj,N.ZL,p.JJ,p.oH,N.XC,m.sg,U.Hw,p.wV,p.On,p.qQ,p.Fd,Y.VQ,_.R9,_.qo,q.lW,k.ey,Y.U0],pipes:[m.Ov,m.H9],styles:[".example-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();const X=["paginator"],K=["paginator2"],tt=["paginator3"];function et(e,o){1&e&&(t.TgZ(0,"th",41),t._uU(1," N\xfamero de pedido"),t.qZA())}function it(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.id_pedido," ")}}function ot(e,o){1&e&&(t.TgZ(0,"th",43),t._uU(1," RFC"),t.qZA())}function nt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.rfc," ")}}function at(e,o){1&e&&(t.TgZ(0,"th",41),t._uU(1,"Socio "),t.qZA())}function ct(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.socio.nombre)," ")}}function dt(e,o){1&e&&(t.TgZ(0,"th",41),t._uU(1," Estatus log\xedstico"),t.qZA())}function lt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.status_log," ")}}function st(e,o){1&e&&(t.TgZ(0,"th",43),t._uU(1,"Estatus"),t.qZA())}function rt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.status_f," ")}}function pt(e,o){1&e&&(t.TgZ(0,"th",44),t._uU(1,"\xa0"),t.qZA())}function ut(e,o){1&e&&(t.TgZ(0,"button",47),t.TgZ(1,"mat-icon"),t._uU(2,"visibility_off"),t.qZA(),t._uU(3,"Cerrar detalles"),t.qZA())}function mt(e,o){1&e&&(t.TgZ(0,"button",47),t.TgZ(1,"mat-icon"),t._uU(2,"visibility"),t.qZA(),t._uU(3,"Ver detalles"),t.qZA())}function ht(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"td",42),t.TgZ(1,"button",45),t.NdJ("click",function(a){const l=t.CHM(i).$implicit,u=t.oxw();return u.expandedElement=u.expandedElement===l?null:l,a.stopPropagation()})("click",function(){return t.CHM(i),t.oxw().detalles()}),t.YNc(2,ut,4,0,"button",46),t.YNc(3,mt,4,0,"button",46),t.qZA(),t.qZA()}if(2&e){const i=o.$implicit,n=t.oxw();t.xp6(2),t.Q6J("ngIf",n.expandedElement===i),t.xp6(1),t.Q6J("ngIf",n.expandedElement!==i)}}function _t(e,o){1&e&&(t.TgZ(0,"th",53),t._uU(1," # "),t.qZA())}function ft(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&e){const i=o.index;t.xp6(1),t.hij(" ",i+1," ")}}function gt(e,o){1&e&&(t.TgZ(0,"th",41),t._uU(1," N\xfamero de pedido"),t.qZA())}function Zt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.id_pedido," ")}}function Tt(e,o){1&e&&(t.TgZ(0,"th",54),t._uU(1," Descripci\xf3n"),t.qZA())}function Ct(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descripcion)," ")}}function bt(e,o){1&e&&(t.TgZ(0,"th",53),t._uU(1," Cantidad"),t.qZA())}function vt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.cantidad," ")}}function At(e,o){1&e&&(t.TgZ(0,"th",53),t._uU(1,"Precio p/u"),t.qZA())}function xt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.precio)," ")}}function Dt(e,o){1&e&&(t.TgZ(0,"th",53),t._uU(1,"Subtotal"),t.qZA())}function qt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.subtotal)," ")}}function Ut(e,o){1&e&&(t.TgZ(0,"th",53),t._uU(1,"Descuento"),t.qZA())}function yt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descuento)," ")}}function wt(e,o){1&e&&(t.TgZ(0,"th",53),t._uU(1,"Importe"),t.qZA())}function Nt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.importe)," ")}}function Et(e,o){1&e&&t._UZ(0,"th",55)}function Yt(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"td",42),t.TgZ(1,"a",56),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw(2).eliminarpedidoD(c._id,c.id_pedido)}),t.TgZ(2,"mat-icon",57),t._uU(3,"delete"),t.qZA(),t.qZA(),t.qZA()}}function Qt(e,o){1&e&&t._UZ(0,"tr",58)}function Pt(e,o){1&e&&t._UZ(0,"tr",59)}const B=function(){return[5,10,20]};function kt(e,o){if(1&e&&(t.TgZ(0,"td",42),t.TgZ(1,"div",48),t.TgZ(2,"mat-card"),t.TgZ(3,"div",18),t.TgZ(4,"div",49),t.TgZ(5,"mat-form-field",50),t.TgZ(6,"mat-label"),t._uU(7,"Nombre del cliente "),t.TgZ(8,"mat-icon"),t._uU(9,"locked"),t.qZA(),t.qZA(),t._UZ(10,"input",37),t.qZA(),t.TgZ(11,"mat-form-field",36),t.TgZ(12,"mat-label"),t._uU(13,"Total a pagar"),t.TgZ(14,"mat-icon"),t._uU(15,"locked"),t.qZA(),t.qZA(),t._UZ(16,"input",37),t.ALo(17,"currency"),t.qZA(),t.TgZ(18,"mat-form-field",36),t.TgZ(19,"mat-label"),t._uU(20,"Fecha"),t.TgZ(21,"mat-icon"),t._uU(22,"locked"),t.qZA(),t.qZA(),t._UZ(23,"input",37),t.ALo(24,"date"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(25,"table",20),t.ynx(26,21),t.YNc(27,_t,2,0,"th",29),t.YNc(28,ft,2,1,"td",4),t.BQk(),t.ynx(29,2),t.YNc(30,gt,2,0,"th",3),t.YNc(31,Zt,2,1,"td",4),t.BQk(),t.ynx(32,23),t.YNc(33,Tt,2,0,"th",51),t.YNc(34,Ct,3,3,"td",4),t.BQk(),t.ynx(35,25),t.YNc(36,bt,2,0,"th",29),t.YNc(37,vt,2,1,"td",4),t.BQk(),t.ynx(38,26),t.YNc(39,At,2,0,"th",29),t.YNc(40,xt,3,3,"td",4),t.BQk(),t.ynx(41,27),t.YNc(42,Dt,2,0,"th",29),t.YNc(43,qt,3,3,"td",4),t.BQk(),t.ynx(44,28),t.YNc(45,Ut,2,0,"th",29),t.YNc(46,yt,3,3,"td",4),t.BQk(),t.ynx(47,30),t.YNc(48,wt,2,0,"th",29),t.YNc(49,Nt,3,3,"td",4),t.BQk(),t.ynx(50,31),t.YNc(51,Et,1,0,"th",32),t.YNc(52,Yt,4,0,"td",4),t.BQk(),t.YNc(53,Qt,1,0,"tr",13),t.YNc(54,Pt,1,0,"tr",33),t.qZA(),t._UZ(55,"mat-paginator",16,52),t.qZA(),t.qZA(),t.qZA()),2&e){const i=o.$implicit,n=t.oxw();t.uIk("colspan",n.columnsToDisplayWithExpand.length),t.xp6(1),t.Q6J("@detailExpand",i==n.expandedElement?"expanded":"collapsed"),t.xp6(9),t.Q6J("value",n.socio),t.xp6(6),t.Q6J("value",t.lcZ(17,9,n.total)),t.xp6(7),t.Q6J("value",t.lcZ(24,11,n.fecha)),t.xp6(2),t.Q6J("dataSource",n.dataSource3),t.xp6(28),t.Q6J("matHeaderRowDef",n.displayedColumns3),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns3),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(13,B))}}function St(e,o){1&e&&t._UZ(0,"tr",58)}function Ot(e,o){1&e&&t._UZ(0,"tr",60)}function Bt(e,o){1&e&&t._UZ(0,"tr",61)}function Jt(e,o){1&e&&(t.TgZ(0,"th",62),t._uU(1," # "),t.qZA())}function Mt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&e){const i=o.index;t.xp6(1),t.hij(" ",i+1," ")}}function $t(e,o){1&e&&(t.TgZ(0,"th",63),t._uU(1," Servicios/Producto"),t.qZA())}function jt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descripcion)," ")}}function It(e,o){1&e&&(t.TgZ(0,"th",43),t._uU(1," Cantidad"),t.qZA())}function Lt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.cantidad," ")}}function Ft(e,o){1&e&&(t.TgZ(0,"th",43),t._uU(1," Precio P/U"),t.qZA())}function Ht(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.precio)," ")}}function Rt(e,o){1&e&&(t.TgZ(0,"th",43),t._uU(1,"Subtotal"),t.qZA())}function zt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.subtotal)," ")}}function Vt(e,o){1&e&&(t.TgZ(0,"th",53),t._uU(1,"Descuento"),t.qZA())}function Wt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descuento)," ")}}function Gt(e,o){1&e&&(t.TgZ(0,"th",43),t._uU(1,"Importe"),t.qZA())}function Xt(e,o){if(1&e&&(t.TgZ(0,"td",42),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.importe)," ")}}function Kt(e,o){1&e&&t._UZ(0,"th",55)}function te(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"td",42),t.TgZ(1,"a",56),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw().eliminarpedidoDN(c.i)}),t.TgZ(2,"mat-icon",57),t._uU(3,"delete"),t.qZA(),t.qZA(),t.qZA()}}function ee(e,o){1&e&&t._UZ(0,"tr",58)}function ie(e,o){1&e&&t._UZ(0,"tr",59)}const oe=function(){return["expandedDetail"]};let ne=(()=>{class e{constructor(i,n,a){this.httpservi=i,this.authService=n,this.servimenu=a,this.filter="",this.myControl=new p.NI(""),this.options=[],this.socio="",this.filterValue="",this.pedido="",this.detallepedidonuevo=[],this.total=0,this.estado=!0,this.banderad=0,this.fecha="",this.pedidos=[],this.id_ubicacion="",this.total_nuevo=0,this.descuento=0,this.iva=0,this.importe_nuevo=0,this.importe=0,this.displayedColumns=["index","descripcion","cantidad","precio","subtotal","descuento","importe","borrar"],this.dataSource=new d.by,this.displayedColumns2=["id_pedido","rfc","socio.nombre","status_log","status_f"],this.dataSource2=new d.by,this.displayedColumns3=["index","id_pedido","descripcion","cantidad","subtotal","descuento","importe","borrar"],this.dataSource3=new d.by,this.columnsToDisplayWithExpand=[...this.displayedColumns2,"expand"]}ngOnInit(){this.servimenu.setencabezado("Edici\xf3n de pedidos"),this.ubicacionusuario(this.authService.usuario.ubicacion)}ubicacionusuario(i){this.httpservi.getubicacion(i).subscribe(a=>{for(const c in a)this.id_ubicacion=a[c].id_ubicacion})}pedidoseleccionado(i){this.pedido=i,""!==this.pedido&&10==this.pedido.length?this.httpservi.getpedido(this.pedido,"filtro",this.authService.usuario.ubicacion).subscribe(n=>{this.pedidos=n,console.log(n),this.dataSource2.data=this.pedidos,this.dataSource2.paginator=this.paginator2,this.dataSource2.paginator._intl.itemsPerPageLabel="Filas por pagina",0!==n.length&&(this.fecha=n[0].fecha,this.httpservi.getb_p(n[0].id_b_p).subscribe(a=>{for(const c in a)this.socio=a[c].nombre}),this.detallepedidonuevo=[],this.dataSource=new d.by,this.estado=!1)}):this.dataSource2.data=[]}pedidodetalles(){""!==this.pedido&&this.httpservi.getpedidod(this.pedido).subscribe(i=>{console.log("detallepedido",i),this.detallepedido=i,this.dataSource3.data=this.detallepedido,this.dataSource3.paginator=this.paginator3,this.dataSource3.paginator._intl.itemsPerPageLabel="Filas por pagina",this.total=0;var n=0,a=0;this.importe=0,this.iva=0;for(const c in this.detallepedido)this.detallepedido[c].subtotal&&(this.importe=(a+=this.detallepedido[c].subtotal)-(n+=this.detallepedido[c].descuento),this.iva=.16*a,this.total=this.iva+this.importe)},i=>{console.log(i)})}detalles(){this.banderad=1,this.pedidodetalles()}eliminarpedidoD(i,n){this.httpservi.eliminarpedidoD(i,this.id_ubicacion,n).subscribe(a=>{this.pedidodetalles()},a=>{console.log(a)})}receiveevento(i){this.detallepedidonuevo.push(i),this.dataSource.data=this.detallepedidonuevo,this.dataSource.paginator=this.paginator,this.dataSource.paginator._intl.itemsPerPageLabel="Filas por pagina",this.subtotal()}subtotal(){this.total_nuevo=0;var i=0;this.importe=0,this.descuento=0,this.iva=0;for(const n in this.detallepedidonuevo)i+=this.detallepedidonuevo[n].subtotal,this.descuento+=this.detallepedidonuevo[n].descuento,this.importe_nuevo=i-this.descuento,this.iva=.16*i,this.total_nuevo=this.iva+this.importe_nuevo}terminarped(){if(this.detallepedidonuevo.length>0&&10==this.pedido.length)for(const i in this.detallepedidonuevo)console.log(this.detallepedidonuevo[i]),this.httpservi.guardardetalle(this.detallepedidonuevo[i],this.pedido,this.id_ubicacion).subscribe(n=>{console.log("agregado"),r().fire({position:"center",icon:"success",title:"Cambios aplicados",html:`Se han agregado y guardado los cambios para el pedido <b>${this.pedido}</b>`,showConfirmButton:!0}).then(a=>{a.isConfirmed&&(this.pedidos=[],this.detallepedidonuevo=[],this.banderad=0,this.total_nuevo=0,this.dataSource=new d.by,this.pedidodetalles())})},n=>{r().fire({position:"center",icon:"error",title:"Ups!!",html:"No se ha podido guardar y aplicar los cambios",showConfirmButton:!0}),console.log(n)});else r().fire({position:"center",icon:"error",title:"Ups!!",html:"No se ha seleccionado el n\xfamero de  pedido o producto/servicio",showConfirmButton:!0})}eliminarpedidoDN(i){console.log(i),this.detallepedidonuevo.splice(i,1),this.dataSource=new d.by(this.detallepedidonuevo),this.subtotal()}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(A),t.Y36(x.e),t.Y36(E.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-editped"]],viewQuery:function(i,n){if(1&i&&(t.Gf(X,5),t.Gf(K,5),t.Gf(tt,5)),2&i){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.paginator2=a.first),t.iGM(a=t.CRH())&&(n.paginator3=a.first)}},decls:96,vars:21,consts:[[3,"messageEvent"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id_pedido"],["mat-header-cell","","width","20%",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rfc"],["mat-header-cell","","width","15%",4,"matHeaderCellDef"],["matColumnDef","socio.nombre"],["matColumnDef","status_log"],["matColumnDef","status_f"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","label","seleccione",3,"pageSizeOptions"],["paginator2","matPaginator"],[1,"row"],[1,"container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","index"],["mat-header-cell","","width","8%",4,"matHeaderCellDef"],["matColumnDef","descripcion"],["mat-header-cell","","width","35%",4,"matHeaderCellDef"],["matColumnDef","cantidad"],["matColumnDef","precio"],["matColumnDef","subtotal"],["matColumnDef","descuento"],["mat-header-cell","","width","10%",4,"matHeaderCellDef"],["matColumnDef","importe"],["matColumnDef","borrar"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["paginator","matPaginator"],["fxLayoutAlign","space-between",1,"col-sm-auto"],["appearance","fill"],["matInput","","placeholder","","readonly","",3,"value"],[1,"col-sm"],[1,"example-button-row",2,"margin-right","1px"],["mat-raised-button","","color","azul",2,"margin-top","15px",3,"click"],["mat-header-cell","","width","20%"],["mat-cell",""],["mat-header-cell","","width","15%"],["mat-header-cell","","aria-label","row actions"],["mat-icon-button","","aria-label","expand row",3,"click"],["mat-raised-button","","color","basic",4,"ngIf"],["mat-raised-button","","color","basic"],[1,"example-element-detail"],[1,"example-container"],["appearance","fill",2,"width","300px"],["mat-header-cell","","width","33%",4,"matHeaderCellDef"],["paginator3","matPaginator"],["mat-header-cell","","width","10%"],["mat-header-cell","","width","33%"],["mat-header-cell",""],["type","button",3,"click"],["color","warn",1,"icon"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"example-element-row"],["mat-row","",1,"example-detail-row"],["mat-header-cell","","width","8%"],["mat-header-cell","","width","35%"]],template:function(i,n){1&i&&(t._UZ(0,"br"),t.TgZ(1,"app-buscadorpedido",0),t.NdJ("messageEvent",function(c){return n.pedidoseleccionado(c)}),t.qZA(),t.TgZ(2,"mat-card"),t.TgZ(3,"table",1),t.ynx(4,2),t.YNc(5,et,2,0,"th",3),t.YNc(6,it,2,1,"td",4),t.BQk(),t.ynx(7,5),t.YNc(8,ot,2,0,"th",6),t.YNc(9,nt,2,1,"td",4),t.BQk(),t.ynx(10,7),t.YNc(11,at,2,0,"th",3),t.YNc(12,ct,3,3,"td",4),t.BQk(),t.ynx(13,8),t.YNc(14,dt,2,0,"th",3),t.YNc(15,lt,2,1,"td",4),t.BQk(),t.ynx(16,9),t.YNc(17,st,2,0,"th",6),t.YNc(18,rt,2,1,"td",4),t.BQk(),t.ynx(19,10),t.YNc(20,pt,2,0,"th",11),t.YNc(21,ht,4,2,"td",4),t.BQk(),t.ynx(22,12),t.YNc(23,kt,57,14,"td",4),t.BQk(),t.YNc(24,St,1,0,"tr",13),t.YNc(25,Ot,1,0,"tr",14),t.YNc(26,Bt,1,0,"tr",15),t.qZA(),t._UZ(27,"mat-paginator",16,17),t.qZA(),t._UZ(29,"br"),t.TgZ(30,"app-producto",0),t.NdJ("messageEvent",function(c){return n.receiveevento(c)}),t.qZA(),t.TgZ(31,"div",18),t.TgZ(32,"div",19),t.TgZ(33,"mat-card"),t.TgZ(34,"h3"),t._uU(35,"Por agregar"),t.qZA(),t.TgZ(36,"table",20),t.ynx(37,21),t.YNc(38,Jt,2,0,"th",22),t.YNc(39,Mt,2,1,"td",4),t.BQk(),t.ynx(40,23),t.YNc(41,$t,2,0,"th",24),t.YNc(42,jt,3,3,"td",4),t.BQk(),t.ynx(43,25),t.YNc(44,It,2,0,"th",6),t.YNc(45,Lt,2,1,"td",4),t.BQk(),t.ynx(46,26),t.YNc(47,Ft,2,0,"th",6),t.YNc(48,Ht,3,3,"td",4),t.BQk(),t.ynx(49,27),t.YNc(50,Rt,2,0,"th",6),t.YNc(51,zt,3,3,"td",4),t.BQk(),t.ynx(52,28),t.YNc(53,Vt,2,0,"th",29),t.YNc(54,Wt,3,3,"td",4),t.BQk(),t.ynx(55,30),t.YNc(56,Gt,2,0,"th",6),t.YNc(57,Xt,3,3,"td",4),t.BQk(),t.ynx(58,31),t.YNc(59,Kt,1,0,"th",32),t.YNc(60,te,4,0,"td",4),t.BQk(),t.YNc(61,ee,1,0,"tr",13),t.YNc(62,ie,1,0,"tr",33),t.qZA(),t._UZ(63,"mat-paginator",16,34),t.TgZ(65,"div",18),t.TgZ(66,"div",35),t.TgZ(67,"mat-form-field",36),t.TgZ(68,"mat-label"),t._uU(69,"Importe sin IVA"),t.TgZ(70,"mat-icon"),t._uU(71,"locked"),t.qZA(),t.qZA(),t._UZ(72,"input",37),t.ALo(73,"currency"),t.qZA(),t.qZA(),t.TgZ(74,"div",35),t.TgZ(75,"mat-form-field",36),t.TgZ(76,"mat-label"),t._uU(77,"IVA"),t.TgZ(78,"mat-icon"),t._uU(79,"locked"),t.qZA(),t.qZA(),t._UZ(80,"input",37),t.ALo(81,"currency"),t.qZA(),t.qZA(),t.TgZ(82,"div",35),t.TgZ(83,"mat-form-field",36),t.TgZ(84,"mat-label"),t._uU(85,"Precio por pagar"),t.TgZ(86,"mat-icon"),t._uU(87,"locked"),t.qZA(),t.qZA(),t._UZ(88,"input",37),t.ALo(89,"currency"),t.qZA(),t.qZA(),t.TgZ(90,"div",38),t.TgZ(91,"div",39),t.TgZ(92,"button",40),t.NdJ("click",function(){return n.terminarped()}),t._uU(93,"Guardar cambios"),t.TgZ(94,"mat-icon"),t._uU(95,"check"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(3),t.Q6J("dataSource",n.dataSource2),t.xp6(21),t.Q6J("matHeaderRowDef",n.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",n.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(18,oe)),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(19,B)),t.xp6(9),t.Q6J("dataSource",n.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(20,B)),t.xp6(9),t.Q6J("value",t.lcZ(73,12,n.importe_nuevo)),t.xp6(8),t.Q6J("value",t.lcZ(81,14,n.iva)),t.xp6(8),t.Q6J("value",t.lcZ(89,16,n.total_nuevo)))},directives:[j,g.a8,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,y.NW,I,w.Wh,_.KE,_.hX,U.Hw,D.Nt,q.lW,d.ge,d.ev,m.O5,d.XQ,d.Gk],pipes:[m.H9,m.rS,m.uU],styles:[".mat-verde[_ngcontent-%COMP%]{background-color:green;color:#fff}table[_ngcontent-%COMP%]{width:100%;display:block;overflow-x:auto}.mat-azul[_ngcontent-%COMP%]{background-color:#00f;color:#fff}tr.example-detail-row[_ngcontent-%COMP%]{height:0}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid black;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:bold;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}"],data:{animation:[(0,f.X$)("detailExpand",[(0,f.SB)("collapsed",(0,f.oB)({height:"0px",minHeight:"0"})),(0,f.SB)("expanded",(0,f.oB)({height:"*"})),(0,f.eR)("expanded <=> collapsed",(0,f.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),e})();function ae(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1," # "),t.qZA())}function ce(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const i=o.index;t.xp6(1),t.hij(" ",i+1," ")}}function de(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1," N\xfamero de pedido"),t.qZA())}function le(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.id_pedido," ")}}function se(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1," Descripci\xf3n"),t.qZA())}function re(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descripcion)," ")}}function pe(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1," Cantidad"),t.qZA())}function ue(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.cantidad," ")}}function me(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Precio p/u"),t.qZA())}function he(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.precio)," ")}}function _e(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Subtotal"),t.qZA())}function fe(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.subtotal)," ")}}function ge(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Descuento"),t.qZA())}function Ze(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descuento)," ")}}function Te(e,o){1&e&&(t.TgZ(0,"th",24),t._uU(1,"Importe"),t.qZA())}function Ce(e,o){if(1&e&&(t.TgZ(0,"td",25),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.importe)," ")}}function be(e,o){1&e&&t._UZ(0,"tr",26)}function ve(e,o){1&e&&t._UZ(0,"tr",27)}const Ae=function(){return[5,10,20]};let xe=(()=>{class e{constructor(i,n,a){this.httpservi=i,this.servimenu=n,this.authService=a,this._idpedido="",this.rfc="",this.cliente="",this.estado=!0,this.pedido="",this.total=0,this.descuento=0,this.iva=0,this.displayedColumns=["index","id_pedido","descripcion","cantidad","precio","subtotal","descuento","importe"],this.dataSource=new d.by}ngOnInit(){this.servimenu.setencabezado("Cancelaci\xf3n de pedidos")}clientepedido(){this.rfc="",this.cliente="",this.httpservi.getpedido(this.pedido,"filtro",this.authService.usuario.ubicacion).subscribe(i=>{for(const a in i){this.rfc=i[a].rfc,this._idpedido=i[a]._id;var n=i[a].id_b_p}""!==this.rfc?this.httpservi.getb_p(n).subscribe(a=>{for(const c in a)this.cliente=a[c].nombre;this.preciototal(),this.httpservi.getpedidod(this.pedido).subscribe(c=>{this.pedidos=[],this.pedidos=c,this.dataSource=new d.by(this.pedidos),this.dataSource.paginator=this.paginator,this.dataSource.paginator._intl.itemsPerPageLabel="Filas por pagina"}),this.estado=!1}):this.dataSource=new d.by})}pedidoseleccionado(i){this.pedidos=[],this.total=0,this.pedido=i,""!==this.pedido&&10==this.pedido.length?this.clientepedido():(this.cliente="",this.rfc="",this.dataSource=new d.by,this.estado=!0)}preciototal(){""!==this.pedido&&(this.httpservi.getpedidod(this.pedido).subscribe(i=>{this.total=0;var n=0;this.descuento=0,this.iva=0;for(const a in i)i[a].subtotal&&(n+=i[a].subtotal,this.descuento+=i[a].descuento,this.total=n-this.descuento,this.iva=.16*n,this.total=this.iva+this.total)},i=>{console.log(i)}),this.estado=!1)}cancelarped(){r().fire({title:"\xbfEstas seguro?",html:`Estas por cancelar el pedido <b>${this.pedido}</b>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, Cancelar!"}).then(i=>{i.isConfirmed&&(this.httpservi.eliminarpedido(this._idpedido).subscribe(n=>console.log("pedido eliminado",n)),this.httpservi.eliminarpedidoD(this.pedido,"U02").subscribe(n=>console.log("pedidodetalle eliminado",n)),r().fire("Cancelado!","El pedido fue cancelado correctamente.","success").then(n=>{n.isConfirmed&&(this.rfc="",this.cliente="",this.estado=!0,this.pedido="",this.pedidos=[],this.total=0)}))})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(A),t.Y36(E.h),t.Y36(x.e))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-baja"]],viewQuery:function(i,n){if(1&i&&t.Gf(y.NW,5),2&i){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first)}},decls:68,vars:11,consts:[[3,"messageEvent"],[1,"custom"],[1,"row"],["fxLayoutAlign","space-between",1,"col-sm-auto"],["appearance","fill"],["matInput","","placeholder","","readonly","",3,"value"],[1,"col-sm-auto"],[1,"col-sm"],["mat-raised-button","","color","warn",2,"margin-top","15px",3,"disabled","click"],[1,"container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","index"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_pedido"],["matColumnDef","descripcion"],["matColumnDef","cantidad"],["matColumnDef","precio"],["matColumnDef","subtotal"],["matColumnDef","descuento"],["matColumnDef","importe"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","label","seleccione",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t._UZ(0,"br"),t.TgZ(1,"app-buscadorpedido",0),t.NdJ("messageEvent",function(c){return n.pedidoseleccionado(c)}),t.qZA(),t.TgZ(2,"mat-card",1),t.TgZ(3,"h3"),t._uU(4,"Datos del socio"),t.qZA(),t.TgZ(5,"mat-card-content"),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"mat-form-field",4),t.TgZ(9,"mat-label"),t._uU(10,"Nombre del cliente "),t.TgZ(11,"mat-icon"),t._uU(12,"locked"),t.qZA(),t.qZA(),t._UZ(13,"input",5),t.qZA(),t.qZA(),t.TgZ(14,"div",3),t.TgZ(15,"mat-form-field",4),t.TgZ(16,"mat-label"),t._uU(17,"Rfc"),t.TgZ(18,"mat-icon"),t._uU(19,"locked"),t.qZA(),t.qZA(),t._UZ(20,"input",5),t.qZA(),t.qZA(),t.TgZ(21,"div",6),t.TgZ(22,"mat-form-field",4),t.TgZ(23,"mat-label"),t._uU(24,"Precio total"),t.TgZ(25,"mat-icon"),t._uU(26,"locked"),t.qZA(),t.qZA(),t._UZ(27,"input",5),t.ALo(28,"currency"),t.qZA(),t.qZA(),t.TgZ(29,"div",7),t.TgZ(30,"button",8),t.NdJ("click",function(){return n.cancelarped()}),t._uU(31,"Cancelar pedido"),t.TgZ(32,"mat-icon"),t._uU(33,"delete_forever"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(34,"br"),t.TgZ(35,"div",2),t.TgZ(36,"div",9),t.TgZ(37,"mat-card"),t.TgZ(38,"h3"),t._uU(39,"Detalles"),t.qZA(),t.TgZ(40,"table",10),t.ynx(41,11),t.YNc(42,ae,2,0,"th",12),t.YNc(43,ce,2,1,"td",13),t.BQk(),t.ynx(44,14),t.YNc(45,de,2,0,"th",12),t.YNc(46,le,2,1,"td",13),t.BQk(),t.ynx(47,15),t.YNc(48,se,2,0,"th",12),t.YNc(49,re,3,3,"td",13),t.BQk(),t.ynx(50,16),t.YNc(51,pe,2,0,"th",12),t.YNc(52,ue,2,1,"td",13),t.BQk(),t.ynx(53,17),t.YNc(54,me,2,0,"th",12),t.YNc(55,he,3,3,"td",13),t.BQk(),t.ynx(56,18),t.YNc(57,_e,2,0,"th",12),t.YNc(58,fe,3,3,"td",13),t.BQk(),t.ynx(59,19),t.YNc(60,ge,2,0,"th",12),t.YNc(61,Ze,3,3,"td",13),t.BQk(),t.ynx(62,20),t.YNc(63,Te,2,0,"th",12),t.YNc(64,Ce,3,3,"td",13),t.BQk(),t.YNc(65,be,1,0,"tr",21),t.YNc(66,ve,1,0,"tr",22),t.qZA(),t._UZ(67,"mat-paginator",23),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(13),t.Q6J("value",n.cliente),t.xp6(7),t.Q6J("value",n.rfc),t.xp6(7),t.Q6J("value",t.lcZ(28,8,n.total)),t.xp6(3),t.Q6J("disabled",n.estado),t.xp6(10),t.Q6J("dataSource",n.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(10,Ae)))},directives:[j,g.a8,g.dn,w.Wh,_.KE,_.hX,U.Hw,D.Nt,q.lW,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,y.NW,d.ge,d.ev,d.XQ,d.Gk],pipes:[m.H9,m.rS],styles:["input[_ngcontent-%COMP%]{text-transform:uppercase}table[_ngcontent-%COMP%]{width:100%}"]}),e})();var De=s(3241);function qe(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," # "),t.qZA())}function Ue(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const i=o.index;t.xp6(1),t.hij(" ",i+1," ")}}function ye(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Servicios/Producto"),t.qZA())}function we(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descripcion)," ")}}function Ne(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Cantidad"),t.qZA())}function Ee(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.cantidad," ")}}function Ye(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Precio unitario"),t.qZA())}function Qe(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.precio)," ")}}function Pe(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1," Subtotal"),t.qZA())}function ke(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.subtotal)," ")}}function Se(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Descuento"),t.qZA())}function Oe(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descuento)," ")}}function Be(e,o){1&e&&(t.TgZ(0,"th",28),t._uU(1,"Importe"),t.qZA())}function Je(e,o){if(1&e&&(t.TgZ(0,"td",29),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.importe)," ")}}function Me(e,o){1&e&&t._UZ(0,"th",28)}function $e(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"td",29),t.TgZ(1,"a",30),t.NdJ("click",function(){const c=t.CHM(i).index;return t.oxw().eliminarpedidoD(c)}),t.TgZ(2,"mat-icon",31),t._uU(3,"delete"),t.qZA(),t.qZA(),t.qZA()}}function je(e,o){1&e&&t._UZ(0,"tr",32)}function Ie(e,o){1&e&&t._UZ(0,"tr",33)}const Le=function(){return[5,10,20]};let Fe=(()=>{class e{constructor(i,n,a){this.httpservi=i,this.authService=n,this.servimenu=a,this.filter="",this.myControl=new p.NI(""),this.options=[],this.socio="",this.filterValue="",this.total=0,this.descuento=0,this.detallepedido=[],this.pedidovalor=0,this.id_ubicacion="",this.PEDIDO={id_pedido:"",rfc:"",id_b_p:"",fecha:new Date,ubicacion:""},this.correo="",this.numero="",this.iva=0,this.importe=0,this.displayedColumns=["index","descripcion","cantidad","precio","subtotal","descuento","importe","borrar"],this.dataSource=new d.by}ngOnInit(){this.servimenu.setencabezado("Alta de pedidos"),this.ubicacionusuario(this.authService.usuario.ubicacion)}ubicacionusuario(i){this.httpservi.getubicacion(i).subscribe(a=>{for(const c in a)this.id_ubicacion=a[c].id_ubicacion})}clienteseleccionado(i){console.log("obtenido del buscador",i),console.log(i),""!==i&&this.httpservi.getb_p(i).subscribe(n=>{console.log(n),this.socio=n[0].nombre,this.PEDIDO.rfc=n[0].rfc,this.PEDIDO.id_b_p=n[0].id_b_p,this.numero=n[0].numero_cel,this.correo=n[0].correo})}agregarpedido(){this.PEDIDO.ubicacion=this.authService.usuario.ubicacion,this.httpservi.guardarpedido(this.PEDIDO).subscribe(i=>{console.log("Pedido agregado"),this.pedidovalor=this.pedidovalor+1,r().fire({position:"center",icon:"success",title:"Pedido creado",html:`Su n\xfamero de pedido es <b>${this.PEDIDO.id_pedido}</b> `,showConfirmButton:!0}).then(n=>{n.isConfirmed&&(this.socio="",this.PEDIDO.rfc="",this.PEDIDO.id_b_p="",this.numero="",this.correo="",this.detallepedido=[],this.total=0,this.importe=0,this.iva=0,this.dataSource=new d.by)})},i=>{console.log(i)})}terminarped(){this.detallepedido.length>0&&""!==this.socio?this.httpservi.getpedidos().subscribe(i=>{this.pedidovalor=i+1,this.PEDIDO.id_pedido="P"+String(1e9+this.pedidovalor).slice(1),this.agregarpedido();for(const a in this.detallepedido)this.total+=this.detallepedido[a].subtotal,this.httpservi.guardardetalle(this.detallepedido[a],this.PEDIDO.id_pedido,this.id_ubicacion).subscribe(c=>{console.log("agregado"),this.total=0},c=>{console.log(c)})}):r().fire({position:"center",icon:"error",title:"Ups!!",html:"No ha seleccionado un socio o agregado un servicio/producto",showConfirmButton:!0})}receiveevento(i){this.detallepedido.push(i),this.dataSource=new d.by(this.detallepedido),this.dataSource.paginator=this.paginator,this.dataSource.paginator._intl.itemsPerPageLabel="Filas por pagina",this.totalpedido()}eliminarpedidoD(i){console.log(i),this.detallepedido.splice(i,1),this.dataSource=new d.by(this.detallepedido),this.totalpedido()}totalpedido(){this.total=0,this.descuento=0,this.importe=0;var i=0;this.iva=0;for(const n in this.detallepedido)i+=this.detallepedido[n].subtotal,this.descuento+=this.detallepedido[n].descuento,this.importe=i-this.descuento,this.iva=.16*i,this.total=this.iva+this.importe}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(A),t.Y36(x.e),t.Y36(E.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-alta"]],viewQuery:function(i,n){if(1&i&&t.Gf(y.NW,5),2&i){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first)}},decls:102,vars:20,consts:[[3,"messageEvent"],[1,"custom"],[1,"row"],["fxLayoutAlign","space-between",1,"col-sm-auto"],["appearance","fill"],["matInput","","placeholder","","readonly","",3,"value"],["appearance","fill",2,"width","300px"],[1,"col-sm-auto"],["appearance","fill",2,"width","250px"],[1,"col-sm"],["appearance","fill",2,"width","150px"],[1,"container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","index"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","descripcion"],["matColumnDef","cantidad"],["matColumnDef","precio"],["matColumnDef","subtotal"],["matColumnDef","descuento"],["matColumnDef","importe"],["matColumnDef","borrar"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","label","seleccione",3,"pageSizeOptions"],[1,"example-button-row",2,"margin-right","1px"],["mat-raised-button","","color","azul",2,"margin-top","15px",3,"click"],["mat-header-cell",""],["mat-cell",""],["type","button",3,"click"],["color","warn",1,"icon"],["mat-header-row",""],["mat-row",""]],template:function(i,n){1&i&&(t._UZ(0,"br"),t.TgZ(1,"app-buscador",0),t.NdJ("messageEvent",function(c){return n.clienteseleccionado(c)}),t.qZA(),t.TgZ(2,"mat-card",1),t.TgZ(3,"h3"),t._uU(4,"Datos del socio"),t.qZA(),t.TgZ(5,"mat-card-content"),t.TgZ(6,"div",2),t.TgZ(7,"div",3),t.TgZ(8,"mat-form-field",4),t.TgZ(9,"mat-label"),t._uU(10,"Fecha del pedido"),t.TgZ(11,"mat-icon"),t._uU(12,"locked"),t.qZA(),t.qZA(),t._UZ(13,"input",5),t.ALo(14,"date"),t.qZA(),t.qZA(),t.TgZ(15,"div",3),t.TgZ(16,"mat-form-field",6),t.TgZ(17,"mat-label"),t._uU(18,"Nombre del cliente"),t.TgZ(19,"mat-icon"),t._uU(20,"locked"),t.qZA(),t.qZA(),t._UZ(21,"input",5),t.qZA(),t.qZA(),t.TgZ(22,"div",7),t.TgZ(23,"mat-form-field",8),t.TgZ(24,"mat-label"),t._uU(25,"Correo"),t.TgZ(26,"mat-icon"),t._uU(27,"locked"),t.qZA(),t.qZA(),t._UZ(28,"input",5),t.qZA(),t.qZA(),t.TgZ(29,"div",9),t.TgZ(30,"mat-form-field",10),t.TgZ(31,"mat-label"),t._uU(32,"N\xfamero de celular"),t.TgZ(33,"mat-icon"),t._uU(34,"locked"),t.qZA(),t.qZA(),t._UZ(35,"input",5),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(36,"br"),t.TgZ(37,"app-producto",0),t.NdJ("messageEvent",function(c){return n.receiveevento(c)}),t.qZA(),t.TgZ(38,"div",2),t.TgZ(39,"div",11),t.TgZ(40,"mat-card"),t.TgZ(41,"h3"),t._uU(42,"Pedido"),t.qZA(),t.TgZ(43,"table",12),t.ynx(44,13),t.YNc(45,qe,2,0,"th",14),t.YNc(46,Ue,2,1,"td",15),t.BQk(),t.ynx(47,16),t.YNc(48,ye,2,0,"th",14),t.YNc(49,we,3,3,"td",15),t.BQk(),t.ynx(50,17),t.YNc(51,Ne,2,0,"th",14),t.YNc(52,Ee,2,1,"td",15),t.BQk(),t.ynx(53,18),t.YNc(54,Ye,2,0,"th",14),t.YNc(55,Qe,3,3,"td",15),t.BQk(),t.ynx(56,19),t.YNc(57,Pe,2,0,"th",14),t.YNc(58,ke,3,3,"td",15),t.BQk(),t.ynx(59,20),t.YNc(60,Se,2,0,"th",14),t.YNc(61,Oe,3,3,"td",15),t.BQk(),t.ynx(62,21),t.YNc(63,Be,2,0,"th",14),t.YNc(64,Je,3,3,"td",15),t.BQk(),t.ynx(65,22),t.YNc(66,Me,1,0,"th",14),t.YNc(67,$e,4,0,"td",15),t.BQk(),t.YNc(68,je,1,0,"tr",23),t.YNc(69,Ie,1,0,"tr",24),t.qZA(),t._UZ(70,"mat-paginator",25),t.TgZ(71,"div",2),t.TgZ(72,"div",3),t.TgZ(73,"mat-form-field",4),t.TgZ(74,"mat-label"),t._uU(75,"Importe sin IVA"),t.TgZ(76,"mat-icon"),t._uU(77,"locked"),t.qZA(),t.qZA(),t._UZ(78,"input",5),t.ALo(79,"currency"),t.qZA(),t.qZA(),t.TgZ(80,"div",3),t.TgZ(81,"mat-form-field",4),t.TgZ(82,"mat-label"),t._uU(83,"IVA"),t.TgZ(84,"mat-icon"),t._uU(85,"locked"),t.qZA(),t.qZA(),t._UZ(86,"input",5),t.ALo(87,"currency"),t.qZA(),t.qZA(),t.TgZ(88,"div",3),t.TgZ(89,"mat-form-field",4),t.TgZ(90,"mat-label"),t._uU(91,"Total a pagar"),t.TgZ(92,"mat-icon"),t._uU(93,"locked"),t.qZA(),t.qZA(),t._UZ(94,"input",5),t.ALo(95,"currency"),t.qZA(),t.qZA(),t.TgZ(96,"div",9),t.TgZ(97,"div",26),t.TgZ(98,"button",27),t.NdJ("click",function(){return n.terminarped()}),t._uU(99,"Guardar pedido"),t.TgZ(100,"mat-icon"),t._uU(101,"check"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i&&(t.xp6(13),t.Q6J("value",t.lcZ(14,11,n.PEDIDO.fecha)),t.xp6(8),t.Q6J("value",n.socio),t.xp6(7),t.Q6J("value",n.correo),t.xp6(7),t.Q6J("value",n.numero),t.xp6(8),t.Q6J("dataSource",n.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(19,Le)),t.xp6(8),t.Q6J("value",t.lcZ(79,13,n.importe)),t.xp6(8),t.Q6J("value",t.lcZ(87,15,n.iva)),t.xp6(8),t.Q6J("value",t.lcZ(95,17,n.total)))},directives:[De.a,g.a8,g.dn,w.Wh,_.KE,_.hX,U.Hw,D.Nt,I,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,y.NW,q.lW,d.ge,d.ev,d.XQ,d.Gk],pipes:[m.uU,m.H9,m.rS],styles:[".mat-azul[_ngcontent-%COMP%]{background-color:#00f;color:#fff}table[_ngcontent-%COMP%]{width:100%}"]}),e})();var C=s(3220);const He=["paginator1"],Re=["paginator2"];function ze(e,o){if(1&e&&(t.TgZ(0,"mat-radio-button",41),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}function Ve(e,o){if(1&e&&(t.TgZ(0,"mat-radio-button",41),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const i=o.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",t.lcZ(2,2,i)," ")}}function We(e,o){1&e&&(t.TgZ(0,"th",42),t._uU(1," N\xfamero de pedido "),t.qZA())}function Ge(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.id_pedido," ")}}function Xe(e,o){1&e&&(t.TgZ(0,"th",44),t._uU(1," Rfc del cliente "),t.qZA())}function Ke(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.rfc," ")}}function ti(e,o){1&e&&(t.TgZ(0,"th",44),t._uU(1,"Socio "),t.qZA())}function ei(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.socio.nombre)," ")}}function ii(e,o){1&e&&(t.TgZ(0,"th",42),t._uU(1," Estatus log\xedstico "),t.qZA())}function oi(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.status_log,"")}}function ni(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1," Estatus "),t.qZA())}function ai(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.status_f,"")}}function ci(e,o){1&e&&(t.TgZ(0,"th",45),t._uU(1,"Fecha "),t.qZA())}function di(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.fecha),"")}}function li(e,o){1&e&&t._UZ(0,"th",46)}function si(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"td",43),t.TgZ(1,"button",47),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw().pedidoprocesado(c.id_pedido)}),t.TgZ(2,"mat-icon"),t._uU(3,"done_all"),t.qZA(),t._uU(4,"Procesar"),t.qZA(),t.qZA()}if(2&e){const i=o.$implicit;t.xp6(1),t.Q6J("disabled","procesado"===i.status_log)}}function ri(e,o){1&e&&t._UZ(0,"th",48)}function pi(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"td",43),t.TgZ(1,"button",49),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw().cobrar(c.id_pedido)}),t.TgZ(2,"mat-icon"),t._uU(3,"attach_money"),t.qZA(),t._uU(4,"Cobrar"),t.qZA(),t.qZA()}if(2&e){const i=o.$implicit;t.xp6(1),t.Q6J("disabled","pagado"===i.status_f)}}function ui(e,o){1&e&&t._UZ(0,"th",46)}function mi(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"td",43),t.TgZ(1,"button",50),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw().facturar(c.id_pedido,c.socio.correo)}),t.TgZ(2,"mat-icon"),t._uU(3," credit_card"),t.qZA(),t._uU(4,"facturar"),t.qZA(),t.qZA()}if(2&e){const i=o.$implicit;t.xp6(1),t.Q6J("disabled","no pagado"===i.status_f||!0===i.facturado)}}function hi(e,o){1&e&&(t.TgZ(0,"th",51),t._uU(1,"\xa0"),t.qZA())}function _i(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"td",43),t.TgZ(1,"button",52),t.NdJ("click",function(a){const l=t.CHM(i).$implicit,u=t.oxw();return u.expandedElement=u.expandedElement===l?null:l,a.stopPropagation()})("click",function(){const c=t.CHM(i).$implicit;return t.oxw().pedidodetalle(c.id_pedido,c.socio.id_b_p)}),t.TgZ(2,"button",53),t.TgZ(3,"mat-icon"),t._uU(4,"visibility_off"),t.qZA(),t.qZA(),t.TgZ(5,"button",53),t.TgZ(6,"mat-icon"),t._uU(7,"visibility"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&e){const i=o.$implicit,n=t.oxw();t.xp6(2),t.Q6J("hidden",n.expandedElement!==i),t.xp6(3),t.Q6J("hidden",n.expandedElement===i)}}function fi(e,o){1&e&&(t.TgZ(0,"th",73),t._uU(1," # "),t.qZA())}function gi(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&e){const i=o.index;t.xp6(1),t.hij(" ",i+1," ")}}function Zi(e,o){1&e&&(t.TgZ(0,"th",74),t._uU(1," N\xfamero de pedido"),t.qZA())}function Ti(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.id_pedido," ")}}function Ci(e,o){1&e&&(t.TgZ(0,"th",75),t._uU(1," Descripcion del servicio/Producto "),t.qZA())}function bi(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descripcion)," ")}}function vi(e,o){1&e&&(t.TgZ(0,"th",48),t._uU(1," Cantidad "),t.qZA())}function Ai(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.cantidad," ")}}function xi(e,o){1&e&&(t.TgZ(0,"th",48),t._uU(1," Precio P/U "),t.qZA())}function Di(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.precio),"")}}function qi(e,o){1&e&&(t.TgZ(0,"th",48),t._uU(1," Subtotal "),t.qZA())}function Ui(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.subtotal),"")}}function yi(e,o){1&e&&(t.TgZ(0,"th",48),t._uU(1,"Descuento"),t.qZA())}function wi(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descuento)," ")}}function Ni(e,o){1&e&&(t.TgZ(0,"th",48),t._uU(1," Importe "),t.qZA())}function Ei(e,o){if(1&e&&(t.TgZ(0,"td",43),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.importe),"")}}function Yi(e,o){1&e&&t._UZ(0,"tr",76)}function Qi(e,o){1&e&&t._UZ(0,"tr",77)}function Pi(e,o){if(1&e&&(t.TgZ(0,"td",43),t.TgZ(1,"div",54),t.TgZ(2,"div",1),t.TgZ(3,"div",55),t.TgZ(4,"mat-card"),t.TgZ(5,"div",1),t.TgZ(6,"div",56),t.TgZ(7,"mat-form-field",57),t.TgZ(8,"mat-label"),t._uU(9,"Correo"),t.TgZ(10,"mat-icon"),t._uU(11,"locked"),t.qZA(),t.qZA(),t._UZ(12,"input",58),t.qZA(),t.TgZ(13,"mat-form-field",59),t.TgZ(14,"mat-label"),t._uU(15,"N\xfamero de celular"),t.TgZ(16,"mat-icon"),t._uU(17,"locked"),t.qZA(),t.qZA(),t._UZ(18,"input",58),t.qZA(),t.TgZ(19,"mat-form-field",60),t.TgZ(20,"mat-label"),t._uU(21,"Costo del pedido"),t.TgZ(22,"mat-icon"),t._uU(23,"locked"),t.qZA(),t.qZA(),t._UZ(24,"input",58),t.ALo(25,"currency"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"table",61),t.ynx(27,62),t.YNc(28,fi,2,0,"th",63),t.YNc(29,gi,2,1,"td",20),t.BQk(),t.ynx(30,18),t.YNc(31,Zi,2,0,"th",64),t.YNc(32,Ti,2,1,"td",20),t.BQk(),t.ynx(33,65),t.YNc(34,Ci,2,0,"th",66),t.YNc(35,bi,3,3,"td",20),t.BQk(),t.ynx(36,67),t.YNc(37,vi,2,0,"th",31),t.YNc(38,Ai,2,1,"td",20),t.BQk(),t.ynx(39,68),t.YNc(40,xi,2,0,"th",31),t.YNc(41,Di,3,3,"td",20),t.BQk(),t.ynx(42,69),t.YNc(43,qi,2,0,"th",31),t.YNc(44,Ui,3,3,"td",20),t.BQk(),t.ynx(45,70),t.YNc(46,yi,2,0,"th",31),t.YNc(47,wi,3,3,"td",20),t.BQk(),t.ynx(48,71),t.YNc(49,Ni,2,0,"th",31),t.YNc(50,Ei,3,3,"td",20),t.BQk(),t.YNc(51,Yi,1,0,"tr",36),t.YNc(52,Qi,1,0,"tr",72),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e){const i=o.$implicit,n=t.oxw();t.uIk("colspan",n.columnsToDisplayWithExpand.length),t.xp6(1),t.Q6J("@detailExpand",i==n.expandedElement?"expanded":"collapsed"),t.xp6(11),t.Q6J("value",n.correo),t.xp6(6),t.Q6J("value",n.numero),t.xp6(6),t.Q6J("value",t.lcZ(25,8,n.total)),t.xp6(2),t.Q6J("dataSource",n.dataSource2),t.xp6(25),t.Q6J("matHeaderRowDef",n.displayedColumns2),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns2)}}function ki(e,o){1&e&&t._UZ(0,"tr",76)}function Si(e,o){1&e&&t._UZ(0,"tr",78)}function Oi(e,o){1&e&&t._UZ(0,"tr",79)}const Bi=function(){return["expandedDetail"]},Ji=function(){return[5,10,20]};let Mi=(()=>{class e{constructor(i,n,a){this.httpservi=i,this.authService=n,this.servimenu=a,this.pedidos=[],this.pedidosd=[],this.bandera=0,this.total=0,this.descuento=0,this.cambio=0,this.correo="",this.numero="",this.xml="",this.facturavalor=0,this.id_factura="",this.fecha_inicio=new Date,this.fecha_fin=new Date,this.fecha_final="",this.fecha="",this.iva=0,this.enviar_correo=!0,this.displayedColumns=["id_pedido","rfc","socio.nombre","status_log","status_f","fecha","procesado","cobrar","facturar"],this.displayedColumns2=["index","id_pedido","descripcion","cantidad","precio","subtotal","descuento","importe"],this.dataSource=new d.by,this.dataSource2=new d.by([]),this.seleccionado="Carrito de compra",this.seleccionado2="No pagado",this.opciones=["Carrito de compra","Procesado","Todos"],this.opciones2=["No pagado","Pagado","Todos"],this.columnsToDisplayWithExpand=[...this.displayedColumns,"expand"]}ngOnInit(){this.fechaseleccionada()}fechaseleccionada(){this.servimenu.setencabezado("Tratamiento de pedidos"),this.fecha_final=new Date(this.fecha_fin.getTime()+864e5),this.pedidosseleccionados(this.seleccionado)}pedidoprocesado(i){const n={id_pedido:i,status_log:"procesado"};console.log("actualizado correctamente"),r().fire({title:"\xbfConfirmar como procesado?",html:`Estas por procesar el pedido <b>${i}</b>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si"}).then(a=>{a.isConfirmed&&this.httpservi.updatepedido(n).subscribe(c=>{this.pedidosseleccionados(this.seleccionado),r().fire("Pedido procesado!","Se confirmo el pedido como ya realizado/entregado","success")})})}pedidosseleccionados(i){switch(this.bandera=0,i){case"Pagado":this.listapedidos("pagado");break;case"No pagado":this.listapedidos("no pagado");break;case"Carrito de compra":this.listapedidos("carrito de compras");break;case"Procesado":this.listapedidos("procesado");break;case"Todos":this.listapedidos("todos")}}listapedidos(i){this.pedidos=[],this.httpservi.getpedido(i,"tratamiento",this.authService.usuario.ubicacion,this.fecha_inicio.toDateString(),this.fecha_final.toDateString(),this.seleccionado2.toLowerCase()).subscribe(n=>{this.pedidos=n,console.log(n),this.dataSource=new d.by(this.pedidos),this.dataSource.data=this.pedidos,this.dataSource.paginator=this.paginator1,this.dataSource.paginator._intl.itemsPerPageLabel="Filas por pagina"})}pedidodetalle(i,n){this.httpservi.getpedidod(i).subscribe(a=>{this.total=0;var c=0;this.pedidosd=a,this.descuento=0,this.iva=0,this.dataSource2.data=this.pedidosd;for(const l in a)c+=Number(a[l].subtotal),this.descuento+=Number(a[l].descuento),this.total=c-this.descuento,this.iva=.16*c,this.total=this.iva+this.total}),this.httpservi.getb_p(n).subscribe(a=>{for(const c in a)this.correo=a[c].correo,this.numero=a[c].numero_cel})}cobrar(i){const n={id_pedido:i,status_f:"pagado"};this.httpservi.getpedidod(i).subscribe(a=>{this.total=0;var c=0;this.descuento=0,this.iva=0;for(const l in a)c+=Number(a[l].subtotal),this.descuento+=Number(a[l].descuento),this.total=c-this.descuento,this.iva=.16*c,this.total=this.iva+this.total;r().fire({title:`Monto total a pagar de $ ${this.total} pesos`,html:'<h3>Ingresar pago</h3><input id="swal-input1" style="text-align:right;">',showCancelButton:!0,confirmButtonText:"Cobrar",showLoaderOnConfirm:!0,preConfirm:()=>{const u=document.getElementById("swal-input1").value;this.cambio=""==u?0:Number(u)-this.total}}).then(l=>{l.isConfirmed&&this.httpservi.updatepedido(n).subscribe(u=>{console.log("pagado correctamente"),this.pedidosseleccionados(this.seleccionado),r().fire({title:"Pedido pagado",text:`El cambio es de : $ ${this.cambio.toFixed(2)} pesos`,icon:"success",confirmButtonText:"ok"})})})})}facturar(i,n){let a="",c="enabled",l="checked";""==n?(c="disabled",l="",a="Sin envio, cliente sin correo"):a="Enviar por correo",r().fire({title:"\xbfDesea facturar?",html:`Estas por confirmar la factura del pedido <b>${i}</b> <br> <br><h3><input type="checkbox" id="swal-input2" ${l}  class="text-left" ${c}> <b>${a}</b></h3>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si",preConfirm:()=>{this.enviar_correo=1==document.getElementById("swal-input2").checked&&""!==n}}).then(u=>{u.isConfirmed&&(this.guardarxml(i,n),r().fire({icon:"info",position:"center",title:"Facturando",html:"Favor de esperar la confirmaci\xf3n...",showConfirmButton:!1,timerProgressBar:!0,didOpen:()=>{r().showLoading()}}))})}guardarxml(i,n){this.httpservi.getfacturas().subscribe(a=>{this.facturavalor=a+1,this.id_factura="F"+String(1e9+this.facturavalor).slice(1)}),this.httpservi.getxml(i).subscribe(a=>{var c=JSON.parse(a),l=c.pdf;this.xml=c.xml;const u={id_factura:this.id_factura,id_pedido:i,xml:this.xml,pdf:l};this.httpservi.updatepedido({id_pedido:i,status_f:"pagado",facturado:!0}).subscribe(h=>{console.log("facturado correctamente")},h=>{console.log(h)}),this.httpservi.guardarfactura(u).subscribe(h=>{console.log("xml guardado"),1==this.enviar_correo&&this.enviarcorreo(i,n,l),r().fire({title:"Facturado",text:"\xbfDescargar la factura electronica?",icon:"success",showCancelButton:!0,cancelButtonText:"Cerrar",confirmButtonText:"Si,descargar!"}).then(Q=>{this.pedidosseleccionados(this.seleccionado),Q.isConfirmed&&this.descargarxml(i,l)})},h=>{r().fire({title:"Ups!!",html:"Error al guardar",icon:"warning",confirmButtonText:"ok"}),console.log(h)})},a=>{r().fire({title:"Ups!!",html:`${a.error}`,icon:"warning",confirmButtonText:"ok"}),console.log(a.error)})}descargarxml(i,n){console.log(i),this.httpservi.getfactura(i).subscribe(a=>{r().fire({position:"center",title:"Descargando...",showConfirmButton:!1,timerProgressBar:!0,timer:900,didOpen:()=>{r().showLoading()}}),this.xml=a[0].xml;var c=document.createElement("a"),l=new Blob([this.xml],{type:"text/xml"}),u=URL.createObjectURL(l);let v,h;c.href=u,c.setAttribute("download",`CFDI4.0 ${i}.xml`),document.body.appendChild(c),c.click(),v="data:application/pdf;base64,"+n,h=document.createElement("a"),h.href=v,h.download=`Factura ${i}.pdf`,h.click(),document.body.appendChild(h)})}enviarcorreo(i,n,a){this.httpservi.getfactura(i).subscribe(c=>{this.xml=c[0].xml,this.httpservi.enviarcorreo({id:i,correo:n,xml:this.xml,pdf:a}).subscribe(u=>{console.log("enviado correctamente")})},c=>{r().fire({title:"Ups!!",html:"No se envio el correo",icon:"warning",confirmButtonText:"ok"}),console.log(c)})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(A),t.Y36(x.e),t.Y36(E.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-tratamiento"]],viewQuery:function(i,n){if(1&i&&(t.Gf(He,5),t.Gf(Re,5)),2&i){let a;t.iGM(a=t.CRH())&&(n.paginator1=a.first),t.iGM(a=t.CRH())&&(n.paginator2=a.first)}},decls:77,vars:15,consts:[[1,"custom"],[1,"row"],[1,"col-sm"],["appearance","fill",1,"example-form-field",2,"width","250px"],[3,"rangePicker"],["matStartDate","","placeholder","Start date",3,"ngModel","ngModelChange"],["matEndDate","","placeholder","End date",3,"ngModel","ngModelChange"],["matSuffix","",3,"for"],["rangePicker",""],["mat-button","","matDateRangePickerCancel",""],["mat-raised-button","","color","primary","matDateRangePickerApply",""],[1,"col-sm-4"],["aria-labelledby","example-radio-group-label",3,"ngModel","ngModelChange"],["class","example-radio-button",3,"value",4,"ngFor","ngForOf"],[1,"col-sm-auto"],[1,"example-button-row",2,"margin-right","1px"],["mat-raised-button","","color","accent",2,"margin-top","40px",3,"click"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id_pedido"],["mat-header-cell","","width","12%",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","rfc"],["mat-header-cell","","width","13%",4,"matHeaderCellDef"],["matColumnDef","socio.nombre"],["matColumnDef","status_log"],["matColumnDef","status_f"],["mat-header-cell","","width","8%",4,"matHeaderCellDef"],["matColumnDef","fecha"],["matColumnDef","procesado"],["mat-header-cell","","width","11%",4,"matHeaderCellDef"],["matColumnDef","cobrar"],["mat-header-cell","","width","10%",4,"matHeaderCellDef"],["matColumnDef","facturar"],["matColumnDef","expand"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","label","seleccione",3,"pageSizeOptions"],["paginator1","matPaginator"],[1,"example-radio-button",3,"value"],["mat-header-cell","","width","12%"],["mat-cell",""],["mat-header-cell","","width","13%"],["mat-header-cell","","width","8%"],["mat-header-cell","","width","11%"],["mat-raised-button","","color","verde",3,"disabled","click"],["mat-header-cell","","width","10%"],["mat-raised-button","","color","primary",3,"disabled","click"],["mat-raised-button","","color","azul",3,"disabled","click"],["mat-header-cell","","aria-label","row actions"],["mat-icon-button","","aria-label","expand row",3,"click"],["mat-raised-button","","color","basic",3,"hidden"],[1,"example-element-detail"],[1,"container"],[1,"example-container"],["appearance","fill",2,"width","300px"],["matInput","","placeholder","","readonly","",3,"value"],["appearance","fill",2,"width","170px"],["appearance","fill"],["mat-table","",1,"mat-elevation-z8",2,"height","200px",3,"dataSource"],["matColumnDef","index"],["mat-header-cell","","width","5%",4,"matHeaderCellDef"],["mat-header-cell","","width","15%",4,"matHeaderCellDef"],["matColumnDef","descripcion"],["mat-header-cell","","width","30%",4,"matHeaderCellDef"],["matColumnDef","cantidad"],["matColumnDef","precio"],["matColumnDef","subtotal"],["matColumnDef","descuento"],["matColumnDef","importe"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","width","5%"],["mat-header-cell","","width","15%"],["mat-header-cell","","width","30%"],["mat-header-row",""],["mat-row",""],["mat-row","",1,"example-element-row"],["mat-row","",1,"example-detail-row"]],template:function(i,n){if(1&i&&(t._UZ(0,"br"),t.TgZ(1,"mat-card",0),t.TgZ(2,"mat-card-content"),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t.TgZ(5,"mat-form-field",3),t.TgZ(6,"mat-label"),t._uU(7,"Rango de fechas "),t.qZA(),t.TgZ(8,"mat-date-range-input",4),t.TgZ(9,"input",5),t.NdJ("ngModelChange",function(c){return n.fecha_inicio=c}),t.qZA(),t.TgZ(10,"input",6),t.NdJ("ngModelChange",function(c){return n.fecha_fin=c}),t.qZA(),t.qZA(),t._UZ(11,"mat-datepicker-toggle",7),t.TgZ(12,"mat-date-range-picker",null,8),t.TgZ(14,"mat-date-range-picker-actions"),t.TgZ(15,"button",9),t._uU(16,"Cancelar"),t.qZA(),t.TgZ(17,"button",10),t._uU(18,"Aceptar"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(19,"div",11),t.TgZ(20,"h3"),t._uU(21,"log\xedstico"),t.qZA(),t.TgZ(22,"mat-radio-group",12),t.NdJ("ngModelChange",function(c){return n.seleccionado=c}),t.YNc(23,ze,2,2,"mat-radio-button",13),t.qZA(),t.qZA(),t.TgZ(24,"div",14),t.TgZ(25,"h3"),t._uU(26,"Pago"),t.qZA(),t.TgZ(27,"mat-radio-group",12),t.NdJ("ngModelChange",function(c){return n.seleccionado2=c}),t.YNc(28,Ve,3,4,"mat-radio-button",13),t.qZA(),t.qZA(),t.TgZ(29,"div",2),t.TgZ(30,"div",15),t.TgZ(31,"button",16),t.NdJ("click",function(){return n.fechaseleccionada()}),t._uU(32,"Buscar"),t.TgZ(33,"mat-icon"),t._uU(34,"search"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(35,"br"),t.TgZ(36,"mat-card"),t.TgZ(37,"h2"),t._uU(38,"Resultados"),t.qZA(),t.TgZ(39,"table",17),t.ynx(40,18),t.YNc(41,We,2,0,"th",19),t.YNc(42,Ge,2,1,"td",20),t.BQk(),t.ynx(43,21),t.YNc(44,Xe,2,0,"th",22),t.YNc(45,Ke,2,1,"td",20),t.BQk(),t.ynx(46,23),t.YNc(47,ti,2,0,"th",22),t.YNc(48,ei,3,3,"td",20),t.BQk(),t.ynx(49,24),t.YNc(50,ii,2,0,"th",19),t.YNc(51,oi,2,1,"td",20),t.BQk(),t.ynx(52,25),t.YNc(53,ni,2,0,"th",26),t.YNc(54,ai,2,1,"td",20),t.BQk(),t.ynx(55,27),t.YNc(56,ci,2,0,"th",26),t.YNc(57,di,3,3,"td",20),t.BQk(),t.ynx(58,28),t.YNc(59,li,1,0,"th",29),t.YNc(60,si,5,1,"td",20),t.BQk(),t.ynx(61,30),t.YNc(62,ri,1,0,"th",31),t.YNc(63,pi,5,1,"td",20),t.BQk(),t.ynx(64,32),t.YNc(65,ui,1,0,"th",29),t.YNc(66,mi,5,1,"td",20),t.BQk(),t.ynx(67,33),t.YNc(68,hi,2,0,"th",34),t.YNc(69,_i,8,2,"td",20),t.BQk(),t.ynx(70,35),t.YNc(71,Pi,53,10,"td",20),t.BQk(),t.YNc(72,ki,1,0,"tr",36),t.YNc(73,Si,1,0,"tr",37),t.YNc(74,Oi,1,0,"tr",38),t.qZA(),t._UZ(75,"mat-paginator",39,40),t.qZA()),2&i){const a=t.MAs(13);t.xp6(8),t.Q6J("rangePicker",a),t.xp6(1),t.Q6J("ngModel",n.fecha_inicio),t.xp6(1),t.Q6J("ngModel",n.fecha_fin),t.xp6(1),t.Q6J("for",a),t.xp6(11),t.Q6J("ngModel",n.seleccionado),t.xp6(1),t.Q6J("ngForOf",n.opciones),t.xp6(4),t.Q6J("ngModel",n.seleccionado2),t.xp6(1),t.Q6J("ngForOf",n.opciones2),t.xp6(11),t.Q6J("dataSource",n.dataSource),t.xp6(33),t.Q6J("matHeaderRowDef",n.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",n.columnsToDisplayWithExpand),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(13,Bi)),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(14,Ji))}},directives:[g.a8,g.dn,_.KE,_.hX,C.wx,C.zY,p.Fj,p.JJ,p.On,C.By,C.nW,_.R9,C._g,C.M5,q.lW,C.dp,C.DK,Y.VQ,m.sg,U.Hw,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,y.NW,Y.U0,d.ge,d.ev,D.Nt,d.XQ,d.Gk],pipes:[m.rS,m.uU,m.H9],styles:["table[_ngcontent-%COMP%]{width:100%;display:block;overflow-x:auto}.mat-azul[_ngcontent-%COMP%]{background-color:#00f;color:#fff}.mat-verde[_ngcontent-%COMP%]{background-color:green;color:#fff}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.example-radio-button[_ngcontent-%COMP%]{margin:5px}tr.example-detail-row[_ngcontent-%COMP%]{height:0}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid black;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:bold;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}"],data:{animation:[(0,f.X$)("detailExpand",[(0,f.SB)("collapsed",(0,f.oB)({height:"0px",minHeight:"0"})),(0,f.SB)("expanded",(0,f.oB)({height:"*"})),(0,f.eR)("expanded <=> collapsed",(0,f.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),e})();const $i=["paginator"],ji=["paginator2"];function Ii(e,o){if(1&e&&(t.TgZ(0,"mat-option",39),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.Q6J("value",i),t.xp6(1),t.hij(" ",i," ")}}function Li(e,o){1&e&&(t.TgZ(0,"th",40),t._uU(1," # "),t.qZA())}function Fi(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const i=o.index;t.xp6(1),t.hij(" ",i+1," ")}}function Hi(e,o){1&e&&(t.TgZ(0,"th",42),t._uU(1," N\xfamero de pedido"),t.qZA())}function Ri(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.id_pedido," ")}}function zi(e,o){1&e&&(t.TgZ(0,"th",43),t._uU(1," Descripci\xf3n"),t.qZA())}function Vi(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descripcion)," ")}}function Wi(e,o){1&e&&(t.TgZ(0,"th",44),t._uU(1," Cantidad"),t.qZA())}function Gi(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.cantidad," ")}}function Xi(e,o){1&e&&(t.TgZ(0,"th",44),t._uU(1,"Precio p/u"),t.qZA())}function Ki(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.precio)," ")}}function to(e,o){1&e&&(t.TgZ(0,"th",44),t._uU(1,"Subtotal"),t.qZA())}function eo(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.subtotal)," ")}}function io(e,o){1&e&&(t.TgZ(0,"th",44),t._uU(1,"Descuento"),t.qZA())}function oo(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descuento)," ")}}function no(e,o){1&e&&(t.TgZ(0,"th",44),t._uU(1,"Importe"),t.qZA())}function ao(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.importe)," ")}}function co(e,o){1&e&&t._UZ(0,"th",45)}function lo(e,o){if(1&e){const i=t.EpF();t.TgZ(0,"td",41),t.TgZ(1,"a",46),t.NdJ("click",function(){const c=t.CHM(i).$implicit;return t.oxw().devolucion(c.id_pedido,c.cantidad,c.descripcion,c.precio,c.referencia)}),t.TgZ(2,"button",47),t.TgZ(3,"mat-icon"),t._uU(4,"settings_backup_restore"),t.qZA(),t._uU(5,"Devoluci\xf3n"),t.qZA(),t.qZA(),t.qZA()}}function so(e,o){1&e&&t._UZ(0,"tr",48)}function ro(e,o){1&e&&t._UZ(0,"tr",49)}function po(e,o){1&e&&(t.TgZ(0,"th",40),t._uU(1," # "),t.qZA())}function uo(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const i=o.index;t.xp6(1),t.hij(" ",i+1," ")}}function mo(e,o){1&e&&(t.TgZ(0,"th",42),t._uU(1," N\xfamero de devoluci\xf3n"),t.qZA())}function ho(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.id_devolucion," ")}}function _o(e,o){1&e&&(t.TgZ(0,"th",42),t._uU(1," N\xfamero de pedido"),t.qZA())}function fo(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.id_pedido," ")}}function go(e,o){1&e&&(t.TgZ(0,"th",50),t._uU(1," Descripci\xf3n"),t.qZA())}function Zo(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.descripcion)," ")}}function To(e,o){1&e&&(t.TgZ(0,"th",51),t._uU(1," Cantidad devuelta"),t.qZA())}function Co(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",i.cantidad_devuelta," ")}}function bo(e,o){1&e&&(t.TgZ(0,"th",44),t._uU(1,"Precio p/u"),t.qZA())}function vo(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.precio)," ")}}function Ao(e,o){1&e&&(t.TgZ(0,"th",44),t._uU(1,"Subtotal"),t.qZA())}function xo(e,o){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"currency"),t.qZA()),2&e){const i=o.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,i.importe)," ")}}function Do(e,o){1&e&&t._UZ(0,"tr",48)}function qo(e,o){1&e&&t._UZ(0,"tr",49)}const L=function(){return[5,10,20]};let Uo=(()=>{class e{constructor(i,n,a){this.httpservi=i,this.authService=n,this.servimenu=a,this.filter="",this.myControl=new p.NI(""),this.options=[],this.prod="",this.filterValue="",this.ubicacion="",this.pedido="",this.total=0,this.descuento=0,this.pedidostabla=[],this.devolucionestabla=[],this.bandera=0,this.cantidaddev=0,this.totaldev=0,this.devolucionvalor=0,this.socio="",this.rfc="",this.iva=0,this.displayedColumns=["index","id_pedido","descripcion","cantidad","precio","subtotal","descuento","importe","devolucion"],this.dataSource=new d.by,this.displayedColumns2=["index","id_devolucion","id_pedido","descripcion","cantidad_devuelta","precio","importe"],this.dataSource2=new d.by}ngOnInit(){this.servimenu.setencabezado("Devoluci\xf3nes"),this.ubicacionusuario(this.authService.usuario.ubicacion),this.filteredOptions=this.myControl.valueChanges.pipe((0,S.O)(""),(0,P.b)(100),(0,O.U)(i=>this._filter(i||"")))}_filter(i){return this.filterValue=i.toLowerCase(),this.filterValue?(this.getpedidosD(),this.options.filter(n=>n.toLowerCase().includes(this.filterValue))):this.options.filter(n=>n.toLowerCase().includes(this.filterValue))}getpedidosD(){this.httpservi.getpedido(this.filterValue,"devolucion",this.authService.usuario.ubicacion).subscribe(i=>{this.options=[];for(const n in i)this.options.push(i[n].id_pedido)})}pedidoseleccionado(){this.pedido=this.myControl.value,""!==this.pedido&&this.httpservi.getpedido(this.pedido,"devolucion",this.authService.usuario.ubicacion).subscribe(i=>{this.socio=i[0].socio.nombre,this.rfc=i[0].rfc,i.length>0?this.pedidod():this.pedidostabla=[],this.myControl.patchValue("")})}pedidod(){this.httpservi.getpedidod(this.pedido).subscribe(i=>{this.pedidostabla=i,console.log(i),this.dataSource=new d.by(this.pedidostabla),this.dataSource.paginator=this.paginator,this.dataSource.paginator._intl.itemsPerPageLabel="Filas por pagina",this.total=0;var n=0;this.descuento=0,this.iva=0;for(const a in i)n+=Number(i[a].subtotal),this.descuento+=Number(i[a].descuento),this.total=n-this.descuento,this.iva=.16*n,this.total=this.iva+this.total}),this.bandera=0}devolucion(i,n,a,c,l){r().fire({title:"Cantidad de la devolucion",html:'<h3>Ingresa la cantidad</h3><input type="number" min="1"  id="swal-input1" style="text-align:right;">',showCancelButton:!0,confirmButtonText:"Aceptar",showLoaderOnConfirm:!0,preConfirm:()=>{}}).then(u=>{if(u.isConfirmed){const h=document.getElementById("swal-input1").value;""!==h&&h<=n&&(this.cantidaddev=Number(h),this.creardevolucion(i,n,a,c,l)),h||r().fire("Upss!","Agregue la cantidad antes de aceptar","warning"),h>n&&r().fire("Upss!","La devoluci\xf3n supera la cantidad del pedido","warning")}})}creardevolucion(i,n,a,c,l){const u={id_devolucion:"",id_pedido:i,cantidad_devuelta:this.cantidaddev,descripcion:a,precio:c,importe:this.cantidaddev*c,fecha:new Date,referencia:l};console.log(l),this.httpservi.getdevoluciones().subscribe(v=>{this.devolucionvalor=v+1,u.id_devolucion="D"+String(1e9+this.devolucionvalor).slice(1),this.httpservi.guardardevolucion(this.ubicacion,u).subscribe(Q=>{console.log("creado correctamente",Q),this.devolucionvalor=this.devolucionvalor+1,this.httpservi.getdevolucion(i).subscribe(J=>{this.devolucionestabla=J,this.dataSource2=new d.by(this.devolucionestabla),this.dataSource2.paginator=this.paginator2,this.dataSource2.paginator._intl.itemsPerPageLabel="Filas por pagina",this.totaldev=0,this.bandera=1;for(const Yo in J)this.totaldev+=Number(J[Yo].importe),this.iva=.16*this.totaldev,this.totaldev=this.iva+this.totaldev}),r().fire("Listo","Devoluci\xf3n realizada correctamente.","success")},Q=>{r().fire("Upss!","La devolucion no es un producto","warning"),console.log(Q)})})}ubicacionusuario(i){this.httpservi.getubicacion(i).subscribe(a=>{for(const c in a)this.ubicacion=a[c].id_ubicacion})}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(A),t.Y36(x.e),t.Y36(E.h))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-devoluciones"]],viewQuery:function(i,n){if(1&i&&(t.Gf($i,5),t.Gf(ji,5)),2&i){let a;t.iGM(a=t.CRH())&&(n.paginator=a.first),t.iGM(a=t.CRH())&&(n.paginator2=a.first)}},decls:119,vars:23,consts:[[1,"custom"],[1,"row"],["fxLayoutAlign","space-between",1,"col-sm-auto"],["appearance","fill",1,"example-full-width"],["type","text","placeholder","","aria-label","Nombre","matInput","",3,"formControl","matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[1,"col-sm"],[1,"example-button-row",2,"margin-right","1px"],["mat-raised-button","","color","accent",2,"margin-top","15px",3,"click"],[1,"container"],[1,"example-container"],["appearance","fill"],["matInput","","placeholder","","readonly","",3,"value"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","index"],["mat-header-cell","","width","5%",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","id_pedido"],["mat-header-cell","","width","20%",4,"matHeaderCellDef"],["matColumnDef","descripcion"],["mat-header-cell","","width","30%",4,"matHeaderCellDef"],["matColumnDef","cantidad"],["mat-header-cell","","width","10%",4,"matHeaderCellDef"],["matColumnDef","precio"],["matColumnDef","subtotal"],["matColumnDef","descuento"],["matColumnDef","importe"],["matColumnDef","devolucion"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","label","seleccione",3,"pageSizeOptions"],["paginator","matPaginator"],["matColumnDef","id_devolucion"],["mat-header-cell","","width","25%",4,"matHeaderCellDef"],["matColumnDef","cantidad_devuelta"],["mat-header-cell","","width","15%",4,"matHeaderCellDef"],["paginator2","matPaginator"],[3,"value"],["mat-header-cell","","width","5%"],["mat-cell",""],["mat-header-cell","","width","20%"],["mat-header-cell","","width","30%"],["mat-header-cell","","width","10%"],["mat-header-cell",""],["type","button",3,"click"],["mat-raised-button","","color","primary"],["mat-header-row",""],["mat-row",""],["mat-header-cell","","width","25%"],["mat-header-cell","","width","15%"]],template:function(i,n){if(1&i&&(t._UZ(0,"br"),t.TgZ(1,"mat-card",0),t.TgZ(2,"mat-card-content"),t.TgZ(3,"div",1),t.TgZ(4,"div",2),t.TgZ(5,"mat-form-field",3),t.TgZ(6,"mat-label"),t._uU(7,"N\xfamero del pedido"),t.qZA(),t._UZ(8,"input",4),t.TgZ(9,"mat-autocomplete",null,5),t.YNc(11,Ii,2,2,"mat-option",6),t.ALo(12,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",7),t.TgZ(14,"div",8),t.TgZ(15,"button",9),t.NdJ("click",function(){return n.pedidoseleccionado()}),t._uU(16,"Buscar"),t.TgZ(17,"mat-icon"),t._uU(18,"search"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(19,"br"),t.TgZ(20,"div",1),t.TgZ(21,"div",10),t.TgZ(22,"mat-card"),t.TgZ(23,"h3"),t._uU(24,"Detalles"),t.qZA(),t.TgZ(25,"div",1),t.TgZ(26,"div",11),t.TgZ(27,"mat-form-field",12),t.TgZ(28,"mat-label"),t._uU(29,"Nombre del socio"),t.TgZ(30,"mat-icon"),t._uU(31,"locked"),t.qZA(),t.qZA(),t._UZ(32,"input",13),t.qZA(),t.TgZ(33,"mat-form-field",12),t.TgZ(34,"mat-label"),t._uU(35,"RFC"),t.TgZ(36,"mat-icon"),t._uU(37,"locked"),t.qZA(),t.qZA(),t._UZ(38,"input",13),t.qZA(),t.TgZ(39,"mat-form-field",12),t.TgZ(40,"mat-label"),t._uU(41,"Costo del pedido"),t.TgZ(42,"mat-icon"),t._uU(43,"locked"),t.qZA(),t.qZA(),t._UZ(44,"input",13),t.ALo(45,"currency"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(46,"table",14),t.ynx(47,15),t.YNc(48,Li,2,0,"th",16),t.YNc(49,Fi,2,1,"td",17),t.BQk(),t.ynx(50,18),t.YNc(51,Hi,2,0,"th",19),t.YNc(52,Ri,2,1,"td",17),t.BQk(),t.ynx(53,20),t.YNc(54,zi,2,0,"th",21),t.YNc(55,Vi,3,3,"td",17),t.BQk(),t.ynx(56,22),t.YNc(57,Wi,2,0,"th",23),t.YNc(58,Gi,2,1,"td",17),t.BQk(),t.ynx(59,24),t.YNc(60,Xi,2,0,"th",23),t.YNc(61,Ki,3,3,"td",17),t.BQk(),t.ynx(62,25),t.YNc(63,to,2,0,"th",23),t.YNc(64,eo,3,3,"td",17),t.BQk(),t.ynx(65,26),t.YNc(66,io,2,0,"th",23),t.YNc(67,oo,3,3,"td",17),t.BQk(),t.ynx(68,27),t.YNc(69,no,2,0,"th",23),t.YNc(70,ao,3,3,"td",17),t.BQk(),t.ynx(71,28),t.YNc(72,co,1,0,"th",29),t.YNc(73,lo,6,0,"td",17),t.BQk(),t.YNc(74,so,1,0,"tr",30),t.YNc(75,ro,1,0,"tr",31),t.qZA(),t._UZ(76,"mat-paginator",32,33),t.qZA(),t.qZA(),t.qZA(),t._UZ(78,"br"),t.TgZ(79,"div",1),t.TgZ(80,"div",10),t.TgZ(81,"mat-card"),t.TgZ(82,"h3"),t._uU(83,"Devoluciones aplicadas"),t.qZA(),t.TgZ(84,"table",14),t.ynx(85,15),t.YNc(86,po,2,0,"th",16),t.YNc(87,uo,2,1,"td",17),t.BQk(),t.ynx(88,34),t.YNc(89,mo,2,0,"th",19),t.YNc(90,ho,2,1,"td",17),t.BQk(),t.ynx(91,18),t.YNc(92,_o,2,0,"th",19),t.YNc(93,fo,2,1,"td",17),t.BQk(),t.ynx(94,20),t.YNc(95,go,2,0,"th",35),t.YNc(96,Zo,3,3,"td",17),t.BQk(),t.ynx(97,36),t.YNc(98,To,2,0,"th",37),t.YNc(99,Co,2,1,"td",17),t.BQk(),t.ynx(100,24),t.YNc(101,bo,2,0,"th",23),t.YNc(102,vo,3,3,"td",17),t.BQk(),t.ynx(103,27),t.YNc(104,Ao,2,0,"th",23),t.YNc(105,xo,3,3,"td",17),t.BQk(),t.YNc(106,Do,1,0,"tr",30),t.YNc(107,qo,1,0,"tr",31),t.qZA(),t._UZ(108,"mat-paginator",32,38),t.TgZ(110,"div",1),t.TgZ(111,"div",11),t.TgZ(112,"mat-form-field",12),t.TgZ(113,"mat-label"),t._uU(114,"Costo total de la devoluci\xf3n"),t.TgZ(115,"mat-icon"),t._uU(116,"locked"),t.qZA(),t.qZA(),t._UZ(117,"input",13),t.ALo(118,"currency"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&i){const a=t.MAs(10);t.xp6(8),t.Q6J("formControl",n.myControl)("matAutocomplete",a),t.xp6(3),t.Q6J("ngForOf",t.lcZ(12,15,n.filteredOptions)),t.xp6(21),t.Q6J("value",n.socio),t.xp6(6),t.Q6J("value",n.rfc),t.xp6(6),t.Q6J("value",t.lcZ(45,17,n.total)),t.xp6(2),t.Q6J("dataSource",n.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(21,L)),t.xp6(8),t.Q6J("dataSource",n.dataSource2),t.xp6(22),t.Q6J("matHeaderRowDef",n.displayedColumns2),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns2),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(22,L)),t.xp6(9),t.Q6J("value",t.lcZ(118,19,n.totaldev))}},directives:[g.a8,g.dn,w.Wh,_.KE,_.hX,D.Nt,p.Fj,N.ZL,p.JJ,p.oH,N.XC,m.sg,q.lW,U.Hw,d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,y.NW,k.ey,d.ge,d.ev,d.XQ,d.Gk],pipes:[m.Ov,m.H9,m.rS],styles:["input[_ngcontent-%COMP%]{text-transform:uppercase}table[_ngcontent-%COMP%]{width:100%;display:block;overflow-x:auto}"]}),e})();var b=s(8984);const yo=[{path:"",children:[{path:"cancelacion",component:xe,data:{Transaccion:"PEDIDOS-CANCELACION"},canActivate:[Z.z,b._],canLoad:[Z.z,b._]},{path:"editar",component:ne,data:{Transaccion:"PEDIDOS-EDICION"},canActivate:[Z.z,b._],canLoad:[Z.z,b._]},{path:"alta",component:Fe,data:{Transaccion:"PEDIDOS-ALTA"},canActivate:[Z.z,b._],canLoad:[Z.z,b._]},{path:"tratamiento",component:Mi,data:{Transaccion:"PEDIDOS-TRATAMIENTO"},canActivate:[Z.z,b._],canLoad:[Z.z,b._]},{path:"devoluciones",component:Uo,data:{Transaccion:"PEDIDOS-DEVOLUCION"},canActivate:[Z.z,b._],canLoad:[Z.z,b._]},{path:"**",redirectTo:"/menu/tr"}]}];let wo=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[$.Bz.forChild(yo)],$.Bz]}),e})();var No=s(6715);let Eo=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[C.FA],imports:[[m.ez,wo,F.q,p.u5,p.UX,Y.Fk,No.B_pModule,C.FA,k.XK]]}),e})()}}]);